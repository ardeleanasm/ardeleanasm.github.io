<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="./assets/favicon.png">
        <link rel="apple-touch-icon" href="./assets/touch-icon.png">
        <title>Laziness leads to progress - Archives</title>
        <link rel="stylesheet" href="./css/default.css" />
        <link rel="stylesheet" href="./css/syntax.css" />
        <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
      <div class="highbar">&nbsp;</div>
        <div id="header">
          <div class="box">
            <div id="logo" class="name">
              <h2><a href="./">Laziness leads to progress!</a></h2>
            </div>
            <div id="navigation" class="pageslinks">
              <nav class="menuNav">
                <div class="menuItems">
                <a href="./" class="archive.html">Home</a>
                <a href="./about.html" class="archive.html">About</a>
                <a href="./archive.html" class="active">Archive</a>
                </div>
              </nav>
            </div>
        </div>
        </div>
        <div class="container-gallery">
        <div id="content" class="inside">
            Here you can find all my previous posts:
<ul>
    
        <li>
            <a href="./posts/2018-06-15-Monte-Carlo-Integration.html">Monte Carlo Integration</a> - June 15, 2018
            
                <!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="../assets/favicon.png">
        <link rel="apple-touch-icon" href="../assets/touch-icon.png">
        <title>Laziness leads to progress - Monte Carlo Integration</title>
        <link rel="stylesheet" href="../css/default.css" />
        <link rel="stylesheet" href="../css/syntax.css" />
        <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
      <div class="highbar">&nbsp;</div>
        <div id="header">
          <div class="box">
            <div id="logo" class="name">
              <h2><a href="../">Laziness leads to progress!</a></h2>
            </div>
            <div id="navigation" class="pageslinks">
              <nav class="menuNav">
                <div class="menuItems">
                <a href="../" class="posts/2018-06-15-Monte-Carlo-Integration.md">Home</a>
                <a href="../about.html" class="posts/2018-06-15-Monte-Carlo-Integration.md">About</a>
                <a href="../archive.html" class="posts/2018-06-15-Monte-Carlo-Integration.md">Archive</a>
                </div>
              </nav>
            </div>
        </div>
        </div>
        <div class="container-gallery">
        <div id="content" class="inside">
            <article>
    <section class="header">
        Posted on June 15, 2018
        
    </section>
    <div class="info">
        
        Tags: <a href="../tags/OCaml.html">OCaml</a>
        
    </div>
    <section>
        <p>Monte Carlo methods are numerical techniques which rely on random sampling to approximate their results. Thus, in Monte Carlo integration, the process of numerical estimation of integrals is applied.</p>
<!--more-->
<p>Monte Carlo methods are numerical techniques which rely on random sampling to approximate their results. Thus, in Monte Carlo integration, the process of numerical estimation of integrals is applied.</p>
<p>Considering we want to integrate a one-dimensional function <span class="math inline">\(f(x)\)</span> from <span class="math inline">\(\textit{a}\)</span> to <span class="math inline">\(\textit{b}\)</span>: <span class="math display">\[F=\int_a^b f(x)\,\mathrm{d}x\]</span>. Since the integral of a function <span class="math inline">\(f(x)\)</span> can be interpreted as the area below the function’s curve, we can pick up a random value <span class="math inline">\(x \in [a,b]\)</span> and evaluate the function at <span class="math inline">\(\textit{x}\)</span> and multiply the result by <span class="math inline">\((b-a)\)</span>. If we plot the function’s curve and the result we will obtain a rectangle where <em>f(x)</em> is the height and <em>(b-a)</em> is the width, basically a crude approximation of the area under the curve. If we continue to evaluate the function at different random points between <em>a</em> and <em>b</em>, adding up the area of the rectangles and averaging the sum, the resulting number gets closer to the actual results of the integral.</p>
<p>Let’s consider an example in which the function we want to integrate is <span class="math inline">\(f(x)=\sin{x}\)</span> on interval <span class="math inline">\([0,\pi]\)</span> and write some <strong>OCaml</strong> code. The function plot can be seen in Fig. 1.</p>
<div class="figure">
<img src="../images/integration-sinx-curve.png" alt="Fig. 1:sin(x) curve" />
<p class="caption">Fig. 1:sin(x) curve</p>
</div>
<p>We will create a new module <strong>MonteCarlo</strong> with the interface defined in the below snippet:</p>
<div class="sourceCode"><pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="kw">module</span> <span class="kw">type</span> MonteCarlo_type=<span class="kw">sig</span>
  <span class="kw">val</span> initializePRNG:<span class="dt">unit</span>-&gt;<span class="dt">unit</span>
  <span class="kw">val</span> getRandomNumber:<span class="dt">unit</span>-&gt;<span class="dt">float</span>
  <span class="kw">val</span> approximate:(<span class="dt">float</span>-&gt;<span class="dt">float</span>)-&gt;<span class="dt">float</span>-&gt;<span class="dt">float</span>-&gt;<span class="dt">int</span>-&gt;<span class="dt">int</span>-&gt;<span class="dt">float</span>-&gt;<span class="dt">float</span>  
<span class="kw">end</span></code></pre></div>
<p>We have a function <em>initializePRNG</em> which will initialize the pseudorandom number generator, <code>let initializePRNG ()=Random.self_init()</code>. <code>let getRandomNumber ()=Random.float 1.0</code> function will only generate a pseudorandom number distributed on <span class="math inline">\([0,1]\)</span>. Finally, the most interesting function, <em>approximate</em> receives 6 parameters as follow: <em>. First parameter is the function <span class="math inline">\(f(x)\)</span> </em>. Second and third parameters are the limits <em>a</em> and <em>b</em>. <em>. Fourth parameter is the number of iterations. </em>. Fifth parameter is the current iteration *. Sixth parameter is the sumed value.</p>
<div class="sourceCode"><pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="kw">let</span> <span class="kw">rec</span> approximate f a b n index value=
    <span class="kw">if</span> index=(n<span class="dv">-1</span>) <span class="kw">then</span>
      ((b-.a)/.(<span class="dt">float_of_int</span> index))*.value
    <span class="kw">else</span>
      <span class="kw">let</span> randVal=getRandomNumber() <span class="kw">in</span>
      <span class="kw">let</span> inInterval=a+.randVal*.(b-.a) <span class="kw">in</span>
      <span class="kw">let</span> fVal=f inInterval <span class="kw">in</span>
      approximate f a b n (index+<span class="dv">1</span>) (value+.fVal)</code></pre></div>
<p>The complete <em>MonteCarlo</em> module is implemented bellow:</p>
<div class="sourceCode"><pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="kw">open</span> <span class="dt">Random</span>
<span class="kw">open</span> MonteCarlo_type

<span class="kw">module</span> MonteCarlo:MonteCarlo_type=<span class="kw">struct</span>
  <span class="kw">let</span> initializePRNG ()=<span class="dt">Random</span>.self_init()
  <span class="kw">let</span> getRandomNumber ()=<span class="dt">Random</span>.<span class="dt">float</span> <span class="fl">1.0</span>
  
  <span class="kw">let</span> <span class="kw">rec</span> approximate f a b n index value=
    <span class="kw">if</span> index=(n<span class="dv">-1</span>) <span class="kw">then</span>
      ((b-.a)/.(<span class="dt">float_of_int</span> index))*.value
    <span class="kw">else</span>
      <span class="kw">let</span> randVal=getRandomNumber() <span class="kw">in</span>
      <span class="kw">let</span> inInterval=a+.randVal*.(b-.a) <span class="kw">in</span>
      <span class="kw">let</span> fVal=f inInterval <span class="kw">in</span>
      approximate f a b n (index+<span class="dv">1</span>) (value+.fVal)
<span class="kw">end</span></code></pre></div>
<p>Finally, to use the code we just need to define the function that we want to integrate and call approximate, as bellow:</p>
<div class="sourceCode"><pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="kw">open</span> MonteCarlo

<span class="kw">let</span> pi = <span class="fl">4.0</span> *. <span class="dt">atan</span> <span class="fl">1.0</span>;;
<span class="kw">let</span> func (x:<span class="dt">float</span>)=<span class="dt">sin</span> x
<span class="kw">let</span> () = 
  MonteCarlo.initializePRNG();
  <span class="dt">print_float</span> (MonteCarlo.approximate func <span class="fl">0.0</span> pi <span class="dv">100000</span> <span class="dv">0</span> <span class="fl">0.0</span>)</code></pre></div>
        <div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = '23ars';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

    </section>
</article>

        </div>
        </div>
        <div id="footer">
          <div class="inside">
            Site proudly generated by
	     <link rel="stylesheet" href="../css/core.css" />





<a href="https://github.com/ardeleanasm"><i class="svg-icon github"></i></a>
<a href="https://www.linkedin.com/in/ardelean-sebastian-mihai"><i class="svg-icon linkedin"></i></a>
<a href="https://ardeleanasm.github.io/atom.xml"><i class="svg-icon rss"></i></a>
<a href="https://www.twitter.com/mihaiseba"><i class="svg-icon twitter"></i></a>
<a href="http://stackoverflow.com/users/1462225/23ars"><i class="svg-icon stackoverflow"></i></a>
<a href="https://www.haskellers.com/user/4914"><img src="https://www.haskellers.com/static/badge.png" alt="I'm a Haskeller">
</a>
</br>
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>.

          </div>
        </div>
    </body>
</html>

            
        </li>
    
        <li>
            <a href="./posts/2018-04-08-Common-Cathode-7-segments-display-driver-implementation-in-Verilog.html">Common-Cathode 7-segments display driver implementation in Verilog</a> - April  8, 2018
            
                <!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="../assets/favicon.png">
        <link rel="apple-touch-icon" href="../assets/touch-icon.png">
        <title>Laziness leads to progress - Common-Cathode 7-segments display driver implementation in Verilog</title>
        <link rel="stylesheet" href="../css/default.css" />
        <link rel="stylesheet" href="../css/syntax.css" />
        <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
      <div class="highbar">&nbsp;</div>
        <div id="header">
          <div class="box">
            <div id="logo" class="name">
              <h2><a href="../">Laziness leads to progress!</a></h2>
            </div>
            <div id="navigation" class="pageslinks">
              <nav class="menuNav">
                <div class="menuItems">
                <a href="../" class="posts/2018-04-08-Common-Cathode-7-segments-display-driver-implementation-in-Verilog.md">Home</a>
                <a href="../about.html" class="posts/2018-04-08-Common-Cathode-7-segments-display-driver-implementation-in-Verilog.md">About</a>
                <a href="../archive.html" class="posts/2018-04-08-Common-Cathode-7-segments-display-driver-implementation-in-Verilog.md">Archive</a>
                </div>
              </nav>
            </div>
        </div>
        </div>
        <div class="container-gallery">
        <div id="content" class="inside">
            <article>
    <section class="header">
        Posted on April  8, 2018
        
    </section>
    <div class="info">
        
        Tags: <a href="../tags/verilog.html">verilog</a>, <a href="../tags/7-segments%20driver.html">7-segments driver</a>
        
    </div>
    <section>
        <h3 id="description">Description</h3>
<p>7-segment LED type displays provide a convenient way to display data, like numbers, letters, and typically consist of seven individual LEDs within one single display package. In order to produce the required data ( HEX characters from 0 to 9 and A to F), on the display the correct combination of LED segments need to be illuminated. However, to display BCD information on 7-segments we need to use a BCD to 7 segments decoder like 74LS47 or HC4511.</p>
<p>A 7-segment LED display usually have 8 connections for each LED segment and one that acts as a GND or VCC. There are some displays that have an additional input pin used to display a decimal point. Anyway, in electronics there are 2 types of 7-segment displays:</p>
<ol style="list-style-type: decimal">
<li><strong>Common Cathode Display</strong> - all the cathode connections of the LED segments are joined together to <strong>Gnd</strong>. This means that a segment is illuminated by applying a logic ‘1’ signal to the <em>Anode</em> terminal. (Img 1a)</li>
<li><strong>Common Anode Display</strong> - all the anode connections of the LED segments are joined together to <strong>Vcc</strong> which means that to illuminate a segment a logic ‘0’ needs to be applied to the <em>Cathode</em> terminal. (Img 1b)</li>
</ol>
<div class="figure">
<img src="../images/common_cathode_anode_leds.png" title="Img 1:LED display types" alt="Img 1:LED display types" />
<p class="caption">Img 1:LED display types</p>
</div>
<div class="figure">
<img src="../images/led_scheme.png" title="Img 2: 7-segment display format" alt="Img 2: 7-segment display format" />
<p class="caption">Img 2: 7-segment display format</p>
</div>
<p>Considering Img 2 we can create the truth table below. Because we use a common cathode 7 segment display we will have 1 for each illuminated segment and 0 for not illuminated. Since we will design a BCD to 7-segments the values from 10 to 15 are invalid. For there values we will mark the corresponding segment with X, meaning don’t care.</p>
<table>
<thead>
<tr class="header">
<th align="center"><span class="math display">\[X_{3}\]</span></th>
<th align="center"><span class="math display">\[X_{2}\]</span></th>
<th align="center"><span class="math display">\[X_{1}\]</span></th>
<th align="center"><span class="math display">\[X_{0}\]</span></th>
<th align="center">a</th>
<th align="center">b</th>
<th align="center">c</th>
<th align="center">d</th>
<th align="center">e</th>
<th align="center">f</th>
<th align="center">g</th>
<th align="center">Display</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">2</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">3</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">4</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">5</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">6</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">7</td>
</tr>
<tr class="odd">
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">8</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">9</td>
</tr>
<tr class="odd">
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">0</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">x</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">0</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">0</td>
<td align="center">x</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">x</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">x</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">-</td>
</tr>
</tbody>
</table>
<p>Based on the above table we can express output as minterm expansions:</p>
<p><span class="math display">\[a = F_{1} (A, B, C, D) = \sum m(0, 2, 3, 5, 7, 8, 9)\]</span></p>
<p><span class="math display">\[b = F_{2} (A, B, C, D) = \sum m(0, 1, 2, 3, 4, 7, 8, 9)\]</span></p>
<p><span class="math display">\[c = F_{3} (A, B, C, D) = \sum m(0, 1, 3, 4, 5, 6, 7, 8, 9)\]</span></p>
<p><span class="math display">\[d = F_{4} (A, B, C, D) = \sum m(0, 2, 3, 5, 6, 8)\]</span></p>
<p><span class="math display">\[e = F_{5} (A, B, C, D) = \sum m(0, 2, 6, 8)\]</span></p>
<p><span class="math display">\[f = F_{6} (A, B, C, D) = \sum m(0, 4, 5, 6, 8, 9)\]</span></p>
<p><span class="math display">\[g = F_{7} (A, B, C, D) = \sum m(2, 3, 4, 5, 6, 8, 9)\]</span></p>
<p>Now we can construct the Karnaugh’s Map for each output term and then simplify it to obtain a logic combination of inputs for each output.</p>
<p><span class="math display">\[a=A\overline{B}\overline{C}+\overline{A}(C+\overline{B}\overline{D}+BD)\]</span></p>
<p><span class="math display">\[b=\overline{AC}\overline{B}+\overline{A}(CD+\overline{C}\overline{D})\]</span></p>
<p><span class="math display">\[c=\overline{B}\overline{C}+\overline{A}(B+D)\]</span></p>
<p><span class="math display">\[d=\overline{A}\overline{B}(C+\overline{D})+\overline{A}(C\overline{D}+BD\overline{C})+A\overline{B}\overline{C}\]</span></p>
<p><span class="math display">\[e=\overline{D}(\overline{B}\overline{C}+\overline{A}C)\]</span></p>
<p><span class="math display">\[f=\overline{A}(B\overline{CD}+\overline{C}\overline{D})+A\overline{B}\overline{C}\]</span></p>
<p><span class="math display">\[g=\overline{A}(C\overline{BD}+B\overline{C})+A\overline{B}\overline{C}\]</span></p>
<h3 id="implementation">Implementation</h3>
<div class="figure">
<img src="../images/hc4511_block_scheme.png" title="Img 3:TI HC4511 block scheme" alt="Img 3:TI HC4511 block scheme" />
<p class="caption">Img 3:TI HC4511 block scheme</p>
</div>
<p>In Img 3 is the block scheme of the TI HC4511 BCD-to-7 segment latch/decoder/driver.</p>
<h4 id="decoder-implementation">Decoder Implementation</h4>
<p>The <strong>decoder</strong> will have 2 input ports ( <em>BL</em> signal, <em>D[0:3]</em>) and one output port, <em>D[0:7]</em>and will contain the implementation of the above equations. Moreover, the output of decoder will be blank ( 0 ) if <strong>BL</strong> signal is 0.</p>
<div class="sourceCode"><pre class="sourceCode verilog"><code class="sourceCode verilog"><span class="kw">module</span> dec_7seg(
    datain,bl,dataout
    );

    <span class="dt">input</span>   [<span class="dv">3</span>:<span class="dv">0</span>]   datain; 
    <span class="dt">input</span>           bl;
    <span class="dt">output</span>  [<span class="dv">7</span>:<span class="dv">0</span>]   dataout;
    
    <span class="kw">assign</span> dataout[<span class="dv">7</span>]=(bl==<span class="bn">1'b0</span>)?<span class="bn">8'b00000000</span>:(datain[<span class="dv">3</span>]&amp;(~datain[<span class="dv">2</span>])&amp;(~datain[<span class="dv">1</span>]))|
                ((~datain[<span class="dv">3</span>])&amp;(datain[<span class="dv">1</span>]|(((~datain[<span class="dv">2</span>])&amp;(~datain[<span class="dv">0</span>]))|(datain[<span class="dv">2</span>]&amp;datain[<span class="dv">0</span>]))));

    <span class="kw">assign</span> dataout[<span class="dv">6</span>]=(bl==<span class="bn">1'b0</span>)?<span class="bn">8'b00000000</span>:((~(datain[<span class="dv">3</span>]&amp;datain[<span class="dv">1</span>]))&amp;(~datain[<span class="dv">2</span>]))|
                        ((~datain[<span class="dv">3</span>])&amp;((datain[<span class="dv">1</span>]&amp;datain[<span class="dv">0</span>])|((~datain[<span class="dv">1</span>])&amp;(~datain[<span class="dv">0</span>]))));

    <span class="kw">assign</span> dataout[<span class="dv">5</span>]=(bl==<span class="bn">1'b0</span>)?<span class="bn">8'b00000000</span>:((~datain[<span class="dv">2</span>])&amp;(~datain[<span class="dv">1</span>]))|
                        ((~datain[<span class="dv">3</span>])&amp;(datain[<span class="dv">2</span>]|datain[<span class="dv">0</span>]));

	<span class="kw">assign</span> dataout[<span class="dv">4</span>]=(bl==<span class="bn">1'b0</span>)?<span class="bn">8'b00000000</span>:
                ((~datain[<span class="dv">3</span>])&amp;(~datain[<span class="dv">2</span>])&amp;(datain[<span class="dv">1</span>]|(~datain[<span class="dv">0</span>])))|
                ((~datain[<span class="dv">3</span>])&amp;((datain[<span class="dv">1</span>]&amp;(~datain[<span class="dv">0</span>]))|(datain[<span class="dv">2</span>]&amp;datain[<span class="dv">0</span>]&amp;(~datain[<span class="dv">1</span>]))))|
                (datain[<span class="dv">3</span>]&amp;(~datain[<span class="dv">2</span>])&amp;(~datain[<span class="dv">1</span>]));

    <span class="kw">assign</span> dataout[<span class="dv">3</span>]=(bl==<span class="bn">1'b0</span>)?<span class="bn">8'b00000000</span>:
                (~datain[<span class="dv">0</span>])&amp;(((~datain[<span class="dv">2</span>])&amp;(~datain[<span class="dv">1</span>]))|((~datain[<span class="dv">3</span>])&amp;datain[<span class="dv">1</span>]));

    <span class="kw">assign</span> dataout[<span class="dv">2</span>]=(bl==<span class="bn">1'b0</span>)?<span class="bn">8'b00000000</span>:
        ((~datain[<span class="dv">3</span>])&amp;((datain[<span class="dv">2</span>]&amp;(~(datain[<span class="dv">1</span>]&amp;datain[<span class="dv">0</span>])))|((~datain[<span class="dv">1</span>])&amp;(~datain[<span class="dv">0</span>]))))|
        (datain[<span class="dv">3</span>]&amp;(~datain[<span class="dv">2</span>])&amp;(~datain[<span class="dv">1</span>]));

    <span class="kw">assign</span> dataout[<span class="dv">1</span>]=(bl==<span class="bn">1'b0</span>)?<span class="bn">8'b00000000</span>:
            ((~datain[<span class="dv">3</span>])&amp;((datain[<span class="dv">1</span>]&amp;(~(datain[<span class="dv">2</span>]&amp;datain[<span class="dv">0</span>])))|(datain[<span class="dv">2</span>]&amp;(~datain[<span class="dv">1</span>]))))|
            (datain[<span class="dv">3</span>]&amp;(~datain[<span class="dv">2</span>])&amp;(~datain[<span class="dv">1</span>]));

    <span class="kw">assign</span> dataout[<span class="dv">0</span>]=<span class="bn">1'b0</span>;<span class="co">//dot</span>
<span class="kw">endmodule</span> <span class="co">// decoder</span></code></pre></div>
<h4 id="latch-implementation">Latch Implementation</h4>
<p>We can easily implement a D-type latch using an <strong>always</strong> block. We will need 5 ports, 3 for input signals ( data in, enable, <span class="math inline">\(\overline{enable}\)</span> ) and 2 for output signals ( q and <span class="math inline">\(\overline{q}\)</span>).</p>
<div class="sourceCode"><pre class="sourceCode verilog"><code class="sourceCode verilog"><span class="kw">module</span> dlatch(
    d,q,nq,ena,nena
    );
    
    <span class="dt">input</span>       d;
    <span class="dt">input</span>       ena;
    <span class="dt">input</span>       nena;
    <span class="dt">output</span>  <span class="dt">reg</span> q;
    <span class="dt">output</span>  <span class="dt">reg</span> nq;

    <span class="kw">always</span> @(d,ena,nena) <span class="kw">begin:</span><span class="dt"> d</span>_latch_procedure
        <span class="kw">if</span>(ena) <span class="kw">begin</span>
            q&lt;=d;
            nq&lt;=~d;
        <span class="kw">end</span> <span class="co">// if( le='1')</span>
        <span class="kw">else</span> <span class="kw">begin</span>
        <span class="kw">end</span>

    <span class="kw">end</span> <span class="co">// d_latch_procedure</span>

<span class="kw">endmodule</span> <span class="co">// dlatch</span></code></pre></div>
<h4 id="driver-implementation">Driver Implementation</h4>
<p>The driver will have to set output to 1 if <em>LT</em> (Lamp Test) signal is low, otherwise the output will be transparent to input. In other words, in can be implemented as a latch.</p>
<div class="sourceCode"><pre class="sourceCode verilog"><code class="sourceCode verilog"><span class="kw">module</span> drv_7seg(
    lt,inbus,outbus
    );

    <span class="dt">input</span>               lt;
    <span class="dt">input</span>       [<span class="dv">7</span>:<span class="dv">0</span>]   inbus;
    <span class="dt">output</span>  <span class="dt">reg</span> [<span class="dv">7</span>:<span class="dv">0</span>]   outbus;

    <span class="kw">always</span> @(lt,inbus) <span class="kw">begin :</span><span class="dt"> d</span>rv_7seg
        <span class="kw">if</span>(lt) <span class="kw">begin</span>
            outbus&lt;=inbus;
        <span class="kw">end</span> <span class="kw">else</span> <span class="kw">begin</span>
            outbus&lt;=<span class="bn">8'b11111111</span>; 
        <span class="kw">end</span>
    <span class="kw">end</span>

<span class="kw">endmodule</span> <span class="co">// drv_7seg</span></code></pre></div>
<h4 id="modules-instantiation-and-testbench">Modules Instantiation and testbench</h4>
<p>Now that we have all the modules defined we can create a new module <strong>driver_7_segments</strong> and instantiate them.</p>
<div class="sourceCode"><pre class="sourceCode verilog"><code class="sourceCode verilog"><span class="kw">module</span> driver_7_segments(
    inbus,le,lt,bl,outbus,
    );
    
    <span class="dt">input</span>       [<span class="dv">3</span>:<span class="dv">0</span>]   inbus;      <span class="co">//input data</span>
    <span class="dt">input</span>               le;             <span class="co">//latch-enable</span>
    <span class="dt">input</span>               lt;             <span class="co">//lamp-test-&gt;displays 8</span>
    <span class="dt">input</span>               bl;             <span class="co">//blanking-&gt; blank</span>
    <span class="dt">output</span> <span class="dt">reg</span>  [<span class="dv">7</span>:<span class="dv">0</span>]   outbus;


    <span class="dt">wire</span> [<span class="dv">3</span>:<span class="dv">0</span>]  latch_output;
    <span class="dt">wire</span> [<span class="dv">7</span>:<span class="dv">0</span>]  decoder_output;

    dlatch latch0(.d  (inbus[<span class="dv">0</span>]),.ena (~le),.nena(le),.q  (latch_output[<span class="dv">0</span>]),.nq ());
    
    dlatch latch1(.d  (inbus[<span class="dv">1</span>]),.ena (~le),.nena(le),.q  (latch_output[<span class="dv">1</span>]),.nq ());
    
    dlatch latch2(.d  (inbus[<span class="dv">2</span>]),.ena (~le),.nena(le),.q  (latch_output[<span class="dv">2</span>]),.nq ());

    dlatch latch3(.d  (inbus[<span class="dv">3</span>]),.ena (~le),.nena(le),.q  (latch_output[<span class="dv">3</span>]),.nq ());
    
    dec_7seg decoder_7_segments(.datain (latch_output),.bl     (bl),.dataout(decoder_output));
    
    drv_7seg driver_7_segments(.inbus (decoder_output),.lt    (lt),.outbus(outbus));
   
<span class="kw">endmodule</span> <span class="co">// segments_driver</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode verilog"><code class="sourceCode verilog">
<span class="ot">`include </span><span class="fl">&quot;testbench/test_inc.v&quot;</span>
<span class="kw">module</span> driver_7_segments_tb;

	<span class="dt">reg</span>       [<span class="dv">3</span>:<span class="dv">0</span>]   inbus;      <span class="co">//input data</span>
    <span class="dt">reg</span>               le;             <span class="co">//latch-enable</span>
    <span class="dt">reg</span>               lt;             <span class="co">//lamp-test-&gt;displays 8</span>
    <span class="dt">reg</span>               bl;             <span class="co">//blanking-&gt; blank</span>
    <span class="dt">wire</span> <span class="dt">reg</span>  [<span class="dv">7</span>:<span class="dv">0</span>]   outbus;

    driver_7_segments driver(.inbus (inbus),.le (le),.lt (lt),.bl (bl),.outbus(outbus));

    <span class="kw">initial</span> <span class="kw">begin</span>
        <span class="dt">$dumpfile</span>(<span class="st">&quot;segments_driver_tb.vcd&quot;</span>);
        <span class="dt">$dumpvars</span>;

        <span class="co">//Lamp Test</span>
        le&lt;=<span class="bn">1'b0</span>;<span class="co">//latch is transparent</span>
        bl&lt;=<span class="bn">1'b1</span>;<span class="co">//blanking is disabled</span>
        inbus&lt;=<span class="bn">4'b0000</span>;<span class="co">//0 on inbus</span>
        lt&lt;=<span class="bn">1'b0</span>;<span class="co">//lamp test enabled</span>
        <span class="bn">#25</span> <span class="ot">`assert</span>(outbus,<span class="bn">8'b11111111</span>);

        <span class="bn">#50</span> 
        <span class="co">//Blanking Test</span>
        le&lt;=<span class="bn">1'b0</span>;<span class="co">//latch is transparent</span>
        bl&lt;=<span class="bn">1'b0</span>;<span class="co">//blanking is enabled</span>
		inbus&lt;=<span class="bn">4'b0000</span>;<span class="co">//0 on inbus</span>
        lt&lt;=<span class="bn">1'b1</span>;<span class="co">//lamp test disabled</span>
        <span class="bn">#25</span> <span class="ot">`assert</span>(outbus,<span class="bn">8'b00000000</span>);        

        <span class="bn">#50</span>
        <span class="co">//test all values</span>
        le&lt;=<span class="bn">1'b0</span>;<span class="co">//latch is transparent</span>
        bl&lt;=<span class="bn">1'b1</span>;<span class="co">//blanking is disabled</span>
        lt&lt;=<span class="bn">1'b1</span>; <span class="co">//lamp test is disabled</span>
        
        <span class="bn">#25</span> inbus&lt;=<span class="bn">4'b0000</span>;
        <span class="bn">#25</span> <span class="ot">`assert</span>(outbus,<span class="bn">8'b11111100</span>);
		
		<span class="bn">#25</span> inbus&lt;=<span class="bn">4'b0001</span>;
        <span class="bn">#25</span> <span class="ot">`assert</span>(outbus,<span class="bn">8'b01100000</span>);

		<span class="bn">#25</span> inbus&lt;=<span class="bn">4'b0010</span>;
        <span class="bn">#25</span> <span class="ot">`assert</span>(outbus,<span class="bn">8'b11011010</span>);

        <span class="bn">#25</span> inbus&lt;=<span class="bn">4'b0011</span>;
        <span class="bn">#25</span> <span class="ot">`assert</span>(outbus,<span class="bn">8'b11110010</span>);

        <span class="bn">#25</span> inbus&lt;=<span class="bn">4'b0100</span>;
        <span class="bn">#25</span> <span class="ot">`assert</span>(outbus,<span class="bn">8'b01100110</span>);

        <span class="bn">#25</span> inbus&lt;=<span class="bn">4'b0101</span>;
        <span class="bn">#25</span> <span class="ot">`assert</span>(outbus,<span class="bn">8'b10110110</span>);

        <span class="bn">#25</span> inbus&lt;=<span class="bn">4'b0110</span>;
        <span class="bn">#25</span> <span class="ot">`assert</span>(outbus,<span class="bn">8'b10111110</span>);

        <span class="bn">#25</span> inbus&lt;=<span class="bn">4'b0111</span>;
        <span class="bn">#25</span> <span class="ot">`assert</span>(outbus,<span class="bn">8'b11100000</span>);

        <span class="bn">#25</span> inbus&lt;=<span class="bn">4'b1000</span>;
        <span class="bn">#25</span> <span class="ot">`assert</span>(outbus,<span class="bn">8'b11111110</span>);

        <span class="bn">#25</span> inbus&lt;=<span class="bn">4'b1001</span>;
        <span class="bn">#25</span> <span class="ot">`assert</span>(outbus,<span class="bn">8'b11110110</span>);
    <span class="kw">end</span> <span class="co">// initial</span>

    <span class="kw">initial</span> <span class="kw">begin :</span><span class="dt">d</span>ump_proc
            <span class="dt">$display</span>(<span class="st">&quot;</span><span class="ch">\t\t</span><span class="st">Time</span><span class="ch">\t</span><span class="st">INBUS</span><span class="ch">\t</span><span class="st">/LE</span><span class="ch">\t</span><span class="st">/LT</span><span class="ch">\t</span><span class="st">/BL</span><span class="ch">\t</span><span class="st">OUTBUS&quot;</span>);
            <span class="dt">$monitor</span>(<span class="st">&quot;%d</span><span class="ch">\t</span><span class="st">%b</span><span class="ch">\t</span><span class="st">%b</span><span class="ch">\t</span><span class="st">%b</span><span class="ch">\t</span><span class="st">%b</span><span class="ch">\t</span><span class="st">%b&quot;</span>,<span class="dt">$time</span>,inbus,le,lt,bl,outbus);
    <span class="kw">end</span> <span class="co">// dump_proc</span>
<span class="kw">endmodule</span> <span class="co">// segments_driver_tb</span></code></pre></div>
<hr />
<h3 id="bibliography">Bibliography</h3>
<ol style="list-style-type: decimal">
<li><a href="http://www.ti.com/lit/ds/symlink/cd74hc4511.pdf">TI HC4511 Datasheet</a></li>
<li><a href="https://www.electronicshub.org/bcd-7-segment-led-display-decoder-circuit/">Electronics Hub</a></li>
<li><a href="https://www.electronics-tutorials.ws/combination/comb_6.html">Electronics Tutorials</a></li>
</ol>
        <div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = '23ars';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

    </section>
</article>

        </div>
        </div>
        <div id="footer">
          <div class="inside">
            Site proudly generated by
	     <link rel="stylesheet" href="../css/core.css" />





<a href="https://github.com/ardeleanasm"><i class="svg-icon github"></i></a>
<a href="https://www.linkedin.com/in/ardelean-sebastian-mihai"><i class="svg-icon linkedin"></i></a>
<a href="https://ardeleanasm.github.io/atom.xml"><i class="svg-icon rss"></i></a>
<a href="https://www.twitter.com/mihaiseba"><i class="svg-icon twitter"></i></a>
<a href="http://stackoverflow.com/users/1462225/23ars"><i class="svg-icon stackoverflow"></i></a>
<a href="https://www.haskellers.com/user/4914"><img src="https://www.haskellers.com/static/badge.png" alt="I'm a Haskeller">
</a>
</br>
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>.

          </div>
        </div>
    </body>
</html>

            
        </li>
    
        <li>
            <a href="./posts/2018-02-15-Monte-Carlo-Pi-Estimation.html">Monte Carlo Pi Estimation</a> - February 15, 2018
            
                <!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="../assets/favicon.png">
        <link rel="apple-touch-icon" href="../assets/touch-icon.png">
        <title>Laziness leads to progress - Monte Carlo Pi Estimation</title>
        <link rel="stylesheet" href="../css/default.css" />
        <link rel="stylesheet" href="../css/syntax.css" />
        <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
      <div class="highbar">&nbsp;</div>
        <div id="header">
          <div class="box">
            <div id="logo" class="name">
              <h2><a href="../">Laziness leads to progress!</a></h2>
            </div>
            <div id="navigation" class="pageslinks">
              <nav class="menuNav">
                <div class="menuItems">
                <a href="../" class="posts/2018-02-15-Monte-Carlo-Pi-Estimation.md">Home</a>
                <a href="../about.html" class="posts/2018-02-15-Monte-Carlo-Pi-Estimation.md">About</a>
                <a href="../archive.html" class="posts/2018-02-15-Monte-Carlo-Pi-Estimation.md">Archive</a>
                </div>
              </nav>
            </div>
        </div>
        </div>
        <div class="container-gallery">
        <div id="content" class="inside">
            <article>
    <section class="header">
        Posted on February 15, 2018
        
    </section>
    <div class="info">
        
        Tags: <a href="../tags/fsharp.html">fsharp</a>
        
    </div>
    <section>
        <p>In this post I’ll show how Pi can be computed using a Monte Carlo algorithm in F#. Basically, using the idea of a dartboard we can obtain the value of PI by simply calculating the number of darts that land in the dartboard verses those that land outside it. And by increasing the number of throws we will get closer to PI’s value, for example throwing the dart 1000 times will be closer to PI than throwing the dart 10 or 100 times.</p>
<p>The formula that we will use to determine PI by throwing darts is:</p>
<p><span class="math display">\[PI=4.0*\frac{hits}{darts thrown}\]</span></p>
<p>In our implementation in F# we will have 3 simple functions. We start by defining a function that will generate random numbers as</p>
<pre class="f#"><code>let rnd=System.Random(System.DateTime.Now.Millisecond)

let genRandomNumbers (count:int) =
    List.init count (fun _ -&gt; rnd.NextDouble ())</code></pre>
<p>We initialize a System.Random object and we use it in <code>getRandomNumbers</code> to generate a value in interval [0,1]. The next thing we will have to do is to implement a function that will check if the thrown dart is in the dartboard or not. The function will have to return true if the distance between the coordinate of the dart and the center of the circle is less than 1, otherwise false.</p>
<pre class="f#"><code>let isInside (x:double) (y:double)=(sqrt (x*x+y*y))&lt;1.0</code></pre>
<p>The third function is just a helper to check if the generated coordinate is inside the circle or not.</p>
<pre class="f#"><code>let sum (x:^a list)=
    match (isInside (x.Head*2.0-1.0) (x.Tail.Head*2.0-1.0)) with
        | false-&gt;0
        | true-&gt; 1</code></pre>
<p>Finally, we will implement a recursive function that computes PI. This function will take as arguments the number of throws, number of hits ( initially 0) and an index ( initially 0). If index value ( idx) reaches number of throws then we will return the value we calculated with the above formula. If not, then we will recursively call the function with <code>hits+1</code> if the newly generated number is inside the circle and with <code>idx+1</code>.</p>
<pre class="f#"><code>let rec computePi (numThrows:int) (hits:int) (idx:int)=
    if numThrows=idx then
        4.0*((double)hits/(double)numThrows)
    else
          computePi numThrows (hits+(genRandomNumbers 2 |&gt; sum)) (idx+1) </code></pre>
<p>And now, we can calculate PI:</p>
<pre class="f#"><code>[&lt;EntryPoint&gt;]
let main argv = 
    let l=computePi 1000000000 0 0
    printfn &quot;%F&quot; l
    0</code></pre>
        <div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = '23ars';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

    </section>
</article>

        </div>
        </div>
        <div id="footer">
          <div class="inside">
            Site proudly generated by
	     <link rel="stylesheet" href="../css/core.css" />





<a href="https://github.com/ardeleanasm"><i class="svg-icon github"></i></a>
<a href="https://www.linkedin.com/in/ardelean-sebastian-mihai"><i class="svg-icon linkedin"></i></a>
<a href="https://ardeleanasm.github.io/atom.xml"><i class="svg-icon rss"></i></a>
<a href="https://www.twitter.com/mihaiseba"><i class="svg-icon twitter"></i></a>
<a href="http://stackoverflow.com/users/1462225/23ars"><i class="svg-icon stackoverflow"></i></a>
<a href="https://www.haskellers.com/user/4914"><img src="https://www.haskellers.com/static/badge.png" alt="I'm a Haskeller">
</a>
</br>
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>.

          </div>
        </div>
    </body>
</html>

            
        </li>
    
        <li>
            <a href="./posts/2017-11-30-Polynomial-Value-in-Haskell.html">Polynomial Value in Haskell</a> - November 30, 2017
            
                <!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="../assets/favicon.png">
        <link rel="apple-touch-icon" href="../assets/touch-icon.png">
        <title>Laziness leads to progress - Polynomial Value in Haskell</title>
        <link rel="stylesheet" href="../css/default.css" />
        <link rel="stylesheet" href="../css/syntax.css" />
        <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
      <div class="highbar">&nbsp;</div>
        <div id="header">
          <div class="box">
            <div id="logo" class="name">
              <h2><a href="../">Laziness leads to progress!</a></h2>
            </div>
            <div id="navigation" class="pageslinks">
              <nav class="menuNav">
                <div class="menuItems">
                <a href="../" class="posts/2017-11-30-Polynomial-Value-in-Haskell.md">Home</a>
                <a href="../about.html" class="posts/2017-11-30-Polynomial-Value-in-Haskell.md">About</a>
                <a href="../archive.html" class="posts/2017-11-30-Polynomial-Value-in-Haskell.md">Archive</a>
                </div>
              </nav>
            </div>
        </div>
        </div>
        <div class="container-gallery">
        <div id="content" class="inside">
            <article>
    <section class="header">
        Posted on November 30, 2017
        
    </section>
    <div class="info">
        
        Tags: <a href="../tags/haskell.html">haskell</a>
        
    </div>
    <section>
        <p>While working on a project that analyze some signals in Haskell I found that I need a simple function <code>polyVal</code> that evaluates a polynomial at specific values.</p>
<p>After a failed search for this function ( I thought that I can find a library or an implementation) I decided to write it on my own, anyway, it’s a simple function.</p>
<p>So, let’s suppose we have a polynomial <em>p</em> of degree <em>N</em>, this function returns the value:</p>
<p><span class="math display">\[p_{0}*x^{N-1}+p_{1}*x^{N-2}+...+p_{N-2}*x+p_{N-1}\]</span></p>
<p>The Haskell implementation of this function is:</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">evalPoly::</span><span class="dt">Double</span><span class="ot">-&gt;</span>[<span class="dt">Double</span>]<span class="ot">-&gt;</span><span class="dt">Double</span>
evalPoly n xs<span class="fu">=</span>sum <span class="fu">$</span> map (\e<span class="ot">-&gt;</span>e<span class="fu">*</span>n<span class="fu">**</span>fromIntegral ((length xs)<span class="fu">-</span><span class="dv">1</span><span class="fu">-</span>(fromJust <span class="fu">$</span> elemIndex e xs))) xs</code></pre></div>
<p>Example of ussage:</p>
<pre><code>&gt;evalPoly 3 [-19,7,-4,6]
-456.0
&gt;evalPoly 5 [3,0,1]
76.0</code></pre>
        <div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = '23ars';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

    </section>
</article>

        </div>
        </div>
        <div id="footer">
          <div class="inside">
            Site proudly generated by
	     <link rel="stylesheet" href="../css/core.css" />





<a href="https://github.com/ardeleanasm"><i class="svg-icon github"></i></a>
<a href="https://www.linkedin.com/in/ardelean-sebastian-mihai"><i class="svg-icon linkedin"></i></a>
<a href="https://ardeleanasm.github.io/atom.xml"><i class="svg-icon rss"></i></a>
<a href="https://www.twitter.com/mihaiseba"><i class="svg-icon twitter"></i></a>
<a href="http://stackoverflow.com/users/1462225/23ars"><i class="svg-icon stackoverflow"></i></a>
<a href="https://www.haskellers.com/user/4914"><img src="https://www.haskellers.com/static/badge.png" alt="I'm a Haskeller">
</a>
</br>
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>.

          </div>
        </div>
    </body>
</html>

            
        </li>
    
        <li>
            <a href="./posts/2017-10-17-How-to-transform-list-to-map-in-Scala.html">How to transform a List to a Map in Scala</a> - October 17, 2017
            
                <!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="../assets/favicon.png">
        <link rel="apple-touch-icon" href="../assets/touch-icon.png">
        <title>Laziness leads to progress - How to transform a List to a Map in Scala</title>
        <link rel="stylesheet" href="../css/default.css" />
        <link rel="stylesheet" href="../css/syntax.css" />
        <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
      <div class="highbar">&nbsp;</div>
        <div id="header">
          <div class="box">
            <div id="logo" class="name">
              <h2><a href="../">Laziness leads to progress!</a></h2>
            </div>
            <div id="navigation" class="pageslinks">
              <nav class="menuNav">
                <div class="menuItems">
                <a href="../" class="posts/2017-10-17-How-to-transform-list-to-map-in-Scala.md">Home</a>
                <a href="../about.html" class="posts/2017-10-17-How-to-transform-list-to-map-in-Scala.md">About</a>
                <a href="../archive.html" class="posts/2017-10-17-How-to-transform-list-to-map-in-Scala.md">Archive</a>
                </div>
              </nav>
            </div>
        </div>
        </div>
        <div class="container-gallery">
        <div id="content" class="inside">
            <article>
    <section class="header">
        Posted on October 17, 2017
        
    </section>
    <div class="info">
        
        Tags: <a href="../tags/scala.html">scala</a>
        
    </div>
    <section>
        <p>Yesterday I faced a new, for me at least, problem when I wanted to read a file line by line into a List and transform the result to a Map.</p>
<p>Basically, I had a file ( from Rosalind) like the one below, a file in FASTA format.</p>
<pre><code>&gt;Tag_XXXX
string
&gt;Tag_YYYY
string
&gt;Tag_ZZZZ
string</code></pre>
<p>A FASTA file contains a labels that starts with ‘&gt;’ character and the associated information on the next line. So it seemed normally to use a Map instead of a List.</p>
<p>So, I started by reading the file in a <code>List[String]</code></p>
<div class="sourceCode"><pre class="sourceCode scala"><code class="sourceCode scala"><span class="kw">val</span> lines: Option[List[String]] = {
    <span class="kw">if</span> (Files.<span class="fu">exists</span>(Paths.<span class="fu">get</span>(filePath))) {
      Some(Source.<span class="fu">fromFile</span>(filePath, <span class="st">&quot;UTF-8&quot;</span>).<span class="fu">getLines</span>().<span class="fu">toList</span>)
    } <span class="kw">else</span> {
      None
    }</code></pre></div>
<p>The next step was to zip lines two by two and filter only the one that contains ‘&gt;’</p>
<div class="sourceCode"><pre class="sourceCode scala"><code class="sourceCode scala">lines.<span class="fu">get</span>.<span class="fu">zip</span>(lines.<span class="fu">get</span>.<span class="fu">tail</span>).<span class="fu">filter</span> { <span class="kw">case</span> (k, _) =&gt; k.<span class="fu">contains</span>(<span class="ch">'&gt;'</span>) }</code></pre></div>
<p>in this way I obtained a list of tuples. The final step was simple because I only had to call toMap function.</p>
<p>Full code can be seen in this <a href="https://github.com/ardeleanasm/bioinformatics">REPO</a>.</p>
        <div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = '23ars';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

    </section>
</article>

        </div>
        </div>
        <div id="footer">
          <div class="inside">
            Site proudly generated by
	     <link rel="stylesheet" href="../css/core.css" />





<a href="https://github.com/ardeleanasm"><i class="svg-icon github"></i></a>
<a href="https://www.linkedin.com/in/ardelean-sebastian-mihai"><i class="svg-icon linkedin"></i></a>
<a href="https://ardeleanasm.github.io/atom.xml"><i class="svg-icon rss"></i></a>
<a href="https://www.twitter.com/mihaiseba"><i class="svg-icon twitter"></i></a>
<a href="http://stackoverflow.com/users/1462225/23ars"><i class="svg-icon stackoverflow"></i></a>
<a href="https://www.haskellers.com/user/4914"><img src="https://www.haskellers.com/static/badge.png" alt="I'm a Haskeller">
</a>
</br>
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>.

          </div>
        </div>
    </body>
</html>

            
        </li>
    
        <li>
            <a href="./posts/2017-08-18-Quantum-Computing-in-Haskell-fourth-part.html">Quantum Computing in Haskell - IV part</a> - August 18, 2017
            
                <!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="../assets/favicon.png">
        <link rel="apple-touch-icon" href="../assets/touch-icon.png">
        <title>Laziness leads to progress - Quantum Computing in Haskell - IV part</title>
        <link rel="stylesheet" href="../css/default.css" />
        <link rel="stylesheet" href="../css/syntax.css" />
        <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
      <div class="highbar">&nbsp;</div>
        <div id="header">
          <div class="box">
            <div id="logo" class="name">
              <h2><a href="../">Laziness leads to progress!</a></h2>
            </div>
            <div id="navigation" class="pageslinks">
              <nav class="menuNav">
                <div class="menuItems">
                <a href="../" class="posts/2017-08-18-Quantum-Computing-in-Haskell-fourth-part.md">Home</a>
                <a href="../about.html" class="posts/2017-08-18-Quantum-Computing-in-Haskell-fourth-part.md">About</a>
                <a href="../archive.html" class="posts/2017-08-18-Quantum-Computing-in-Haskell-fourth-part.md">Archive</a>
                </div>
              </nav>
            </div>
        </div>
        </div>
        <div class="container-gallery">
        <div id="content" class="inside">
            <article>
    <section class="header">
        Posted on August 18, 2017
        
    </section>
    <div class="info">
        
        Tags: <a href="../tags/haskell.html">haskell</a>
        
    </div>
    <section>
        <h2 id="articles">Articles</h2>
<ul>
<li><a href="2017-07-26-Quantum-Computing-in-Haskell.html">Quantum Computing in Haskell - I part</a></li>
<li><a href="2017-07-28-Quantum-Computing-in-Haskell-second-part.html">Quantum Computing in Haskell - II part</a></li>
<li><a href="2017-08-01-Quantum-Computing-in-Haskell-third-part.html">Quantum Computing in Haskell - III part</a></li>
<li><a href="2017-08-18-Quantum-Computing-in-Haskell-fourth-part.html">Quantum Computing in Haskell - IV part</a></li>
<li><a href="https://github.com/ardeleanasm/qchas">Github Repository</a></li>
<li><a href="https://ardeleanasm.github.io/qchas/">Project’s Haddock Documentation</a></li>
<li><a href="https://hackage.haskell.org/package/qchas">QChas Package</a></li>
</ul>
<h2 id="introduction">Introduction</h2>
<p>In the previous articles, first three parts, I presented some haskell code to implement basic operators for simulating Quantum Algorithms. The full source code can be downloaded from <a href="https://github.com/ardeleanasm/qchas">Github Repository</a>. The library was also published on <a href="https://hackage.haskell.org/package/qchas">Hackage</a> and also on <a href="https://www.stackage.org/nightly-2017-08-17/package/qchas-1.0.1.0">Stackage</a> and is available with 2 versions, 1.0.0 and 1.0.1.0. Starting from version 1.0.1.0 the <strong>Utils</strong> module was removed and also, a new module for performing measurements was added. These articles will be also used as documentation/ wiki for the library.</p>
<p>In this fourth part we will start to present some Quantum Algorithms and we will start with one of the simplest ones, Deutsch’s algorithm. In the next articles from the serie we will talk about Deutsch-Jozsa’s algorithm, Grover’s and Shor.</p>
<h2 id="background">Background</h2>
<p>As I said in a previous article when I implemented this algorithm in Java, the problem that Deutsch’s algorithm solves is not an important one in Computer Science but it’s a good example to see the power of quantum computers, being solved by a quantum computer faster than by a traditional one, although not exponentially faster.</p>
<p>So, let’s suppose that we have a function f with 1-bit input and 1-bit output. There are four possible functions, two of them are constant and two are balanced, as we can see in the table below.</p>
<table>
<thead>
<tr class="header">
<th align="left">Function</th>
<th align="center">Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><span class="math inline">\(f_{1}(0)=0, f_{1}(1)=0\)</span></td>
<td align="center">constant</td>
</tr>
<tr class="even">
<td align="left"><span class="math inline">\(f_{2}(0)=1, f_{2}(1)=1\)</span></td>
<td align="center">constant</td>
</tr>
<tr class="odd">
<td align="left"><span class="math inline">\(f_{3}(0)=0, f_{3}(1)=1\)</span></td>
<td align="center">balanced</td>
</tr>
<tr class="even">
<td align="left"><span class="math inline">\(f_{4}(0)=1, f_{4}(1)=0\)</span></td>
<td align="center">balanced</td>
</tr>
</tbody>
</table>
<p>The goal is to determine whether the function is constant or not. Let’s say that we implement such a function on a classic computer:</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">main::</span><span class="dt">IO</span> ()
main<span class="fu">=</span><span class="kw">do</span>
  print <span class="fu">$</span> testFunction f1
  print <span class="fu">$</span> testFunction f2
  print <span class="fu">$</span> testFunction f3
  print <span class="fu">$</span> testFunction f4

<span class="ot">f1::</span><span class="dt">Int</span><span class="ot">-&gt;</span><span class="dt">Int</span>
f1 val<span class="fu">=</span><span class="dv">0</span>

<span class="ot">f2::</span><span class="dt">Int</span><span class="ot">-&gt;</span><span class="dt">Int</span>
f2 val<span class="fu">=</span><span class="dv">1</span>

<span class="ot">f3::</span><span class="dt">Int</span><span class="ot">-&gt;</span><span class="dt">Int</span>
f3 val<span class="fu">=</span>val

<span class="ot">f4::</span><span class="dt">Int</span><span class="ot">-&gt;</span><span class="dt">Int</span>
f4 val
  <span class="fu">|</span> val<span class="fu">==</span><span class="dv">0</span> <span class="fu">=</span> <span class="dv">1</span>
  <span class="fu">|</span> val<span class="fu">==</span><span class="dv">1</span> <span class="fu">=</span> <span class="dv">0</span>

<span class="ot">testFunction::</span>(<span class="dt">Int</span><span class="ot">-&gt;</span><span class="dt">Int</span>)<span class="ot">-&gt;</span><span class="dt">String</span>
testFunction f
  <span class="fu">|</span>f <span class="dv">0</span> <span class="fu">==</span> f <span class="dv">1</span><span class="fu">=</span> <span class="st">&quot;Constant&quot;</span>
  <span class="fu">|</span>otherwise<span class="fu">=</span> <span class="st">&quot;Balanced&quot;</span></code></pre></div>
<p>and the output will be:</p>
<pre><code>&quot;Constant&quot;
&quot;Constant&quot;
&quot;Balanced&quot;
&quot;Balanced&quot;</code></pre>
<p>It can be easily seen that to check if a function is constant or balanced on a classical computer we need two calls to that function, basically we evaluate the function twice. We will see next that by using Deutsch’s algorithm the problem can be solved by evaluating the function only once.</p>
<div class="figure">
<img src="../images/deutsch_quantum_circuits.png" alt="The quantum circuit of Deutsch’s algorithm1" />
<p class="caption">The quantum circuit of Deutsch’s algorithm<a href="https://github.com/ardeleanasm/qchas">1</a></p>
</div>
<p>The quantum circuit that we will have to implement can be seen in the picture above and basically we will have to:</p>
<ul>
<li>Apply <strong>X-Gate</strong> on the second qubit</li>
<li>Apply <span class="math inline">\(H^2\)</span> gate, the Kronecker product between two <strong>Hadamard</strong> Gates</li>
<li>Apply the gate ( or “oracle”) <span class="math inline">\(U_f\)</span></li>
<li>Apply Hadamard Gate again on the first qubit</li>
<li>Measure the circuit</li>
</ul>
<h2 id="implementation">Implementation</h2>
<p>First of all, let’s define the unitary transformations for all four functions:</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="co">--f(0)=0 and f(1)=0</span>
<span class="ot">f1::</span><span class="dt">Gate</span>
f1<span class="fu">=</span><span class="dt">Gate</span> ((<span class="dv">4</span><span class="fu">&gt;&lt;</span><span class="dv">4</span>) [<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>
                ,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>
                ,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>
                ,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>]<span class="ot">::</span><span class="dt">Matrix</span> <span class="dt">C</span>)
<span class="co">--f(0)=1 and f(1)=1</span>
<span class="ot">f2::</span><span class="dt">Gate</span>
f2<span class="fu">=</span><span class="dt">Gate</span> ((<span class="dv">4</span><span class="fu">&gt;&lt;</span><span class="dv">4</span>) [<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>
                ,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>
                ,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>
                ,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>]<span class="ot">::</span><span class="dt">Matrix</span> <span class="dt">C</span>)
<span class="co">--f(0)=0 and f(1)=1</span>
<span class="ot">f3::</span><span class="dt">Gate</span>
f3<span class="fu">=</span><span class="dt">Gate</span> ((<span class="dv">4</span><span class="fu">&gt;&lt;</span><span class="dv">4</span>) [<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>
                ,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>
                ,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>
                ,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>]<span class="ot">::</span><span class="dt">Matrix</span> <span class="dt">C</span>)
<span class="co">--f(0)=1 and f(1)=0</span>
<span class="ot">f4::</span><span class="dt">Gate</span>
f4<span class="fu">=</span><span class="dt">Gate</span> ((<span class="dv">4</span><span class="fu">&gt;&lt;</span><span class="dv">4</span>) [<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>
                ,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>
                ,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>
                ,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>]<span class="ot">::</span><span class="dt">Matrix</span> <span class="dt">C</span>)                </code></pre></div>
<p>The next step is to define a function that will test all the four functions:</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">testDeutschsAlgorithm::</span><span class="dt">IO</span>()
testDeutschsAlgorithm<span class="fu">=</span>mapM_ deutsch [f1,f2,f3,f4]</code></pre></div>
<p>Now, let’s implement the algorithm:</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">
<span class="ot">deutsch::</span><span class="dt">Gate</span><span class="ot">-&gt;</span><span class="dt">IO</span>()
deutsch oracle<span class="fu">=</span><span class="kw">do</span> <span class="kw">let</span> (result<span class="fu">:</span>_)<span class="fu">=</span>measure circuit
                  <span class="kw">case</span> result <span class="kw">of</span>
                    <span class="ch">'0'</span> <span class="ot">-&gt;</span> putStrLn <span class="st">&quot;Function is constant&quot;</span>
                    <span class="ch">'1'</span> <span class="ot">-&gt;</span> putStrLn <span class="st">&quot;Function is balanced&quot;</span>
                    _   <span class="ot">-&gt;</span> return()
    <span class="kw">where</span>
        gateHadamardOnTwoQubits<span class="fu">=</span>(hGate <span class="fu">&lt;+&gt;</span> hGate)
        circuit<span class="fu">=</span>entangle qZero (qZero <span class="fu">|&gt;</span> xGate) <span class="fu">|&gt;</span> gateHadamardOnTwoQubits <span class="fu">|&gt;</span> oracle <span class="fu">|&gt;</span> gateHadamardOnTwoQubits
        measure q<span class="fu">=</span><span class="kw">let</span> result<span class="fu">=</span>map(\c<span class="ot">-&gt;</span>round (realPart (c <span class="fu">*</span> conjugate c))) (toList <span class="fu">.</span> flatten <span class="fu">$</span> qubitState q)        
                  <span class="kw">in</span> <span class="kw">case</span> result <span class="kw">of</span>
                    [<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>]<span class="ot">-&gt;</span><span class="st">&quot;01&quot;</span>
                    [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>]<span class="ot">-&gt;</span><span class="st">&quot;11&quot;</span>
                    _        <span class="ot">-&gt;</span><span class="st">&quot;??&quot;</span></code></pre></div>
<p>If we run the code we will have:</p>
<pre><code>ghci&gt;testDeutschsAlgorithm
Function is constant
Function is constant
Function is balanced
Function is balanced
</code></pre>
<h2 id="conclusions">Conclusions</h2>
<p>As we can see in this first example, running an algorithm, even a simple one, on a quantum computer can be faster than running it on a classical computer.</p>
<p>About the implemented library, as I said, you can download it from the links that I specified before and these articles and examples of code will be used as a “How to use..” for the library.</p>
        <div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = '23ars';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

    </section>
</article>

        </div>
        </div>
        <div id="footer">
          <div class="inside">
            Site proudly generated by
	     <link rel="stylesheet" href="../css/core.css" />





<a href="https://github.com/ardeleanasm"><i class="svg-icon github"></i></a>
<a href="https://www.linkedin.com/in/ardelean-sebastian-mihai"><i class="svg-icon linkedin"></i></a>
<a href="https://ardeleanasm.github.io/atom.xml"><i class="svg-icon rss"></i></a>
<a href="https://www.twitter.com/mihaiseba"><i class="svg-icon twitter"></i></a>
<a href="http://stackoverflow.com/users/1462225/23ars"><i class="svg-icon stackoverflow"></i></a>
<a href="https://www.haskellers.com/user/4914"><img src="https://www.haskellers.com/static/badge.png" alt="I'm a Haskeller">
</a>
</br>
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>.

          </div>
        </div>
    </body>
</html>

            
        </li>
    
        <li>
            <a href="./posts/2017-08-01-Quantum-Computing-in-Haskell-third-part.html">Quantum Computing in Haskell - III part</a> - August  1, 2017
            
                <!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="../assets/favicon.png">
        <link rel="apple-touch-icon" href="../assets/touch-icon.png">
        <title>Laziness leads to progress - Quantum Computing in Haskell - III part</title>
        <link rel="stylesheet" href="../css/default.css" />
        <link rel="stylesheet" href="../css/syntax.css" />
        <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
      <div class="highbar">&nbsp;</div>
        <div id="header">
          <div class="box">
            <div id="logo" class="name">
              <h2><a href="../">Laziness leads to progress!</a></h2>
            </div>
            <div id="navigation" class="pageslinks">
              <nav class="menuNav">
                <div class="menuItems">
                <a href="../" class="posts/2017-08-01-Quantum-Computing-in-Haskell-third-part.md">Home</a>
                <a href="../about.html" class="posts/2017-08-01-Quantum-Computing-in-Haskell-third-part.md">About</a>
                <a href="../archive.html" class="posts/2017-08-01-Quantum-Computing-in-Haskell-third-part.md">Archive</a>
                </div>
              </nav>
            </div>
        </div>
        </div>
        <div class="container-gallery">
        <div id="content" class="inside">
            <article>
    <section class="header">
        Posted on August  1, 2017
        
    </section>
    <div class="info">
        
        Tags: <a href="../tags/haskell.html">haskell</a>
        
    </div>
    <section>
        <h2 id="articles">Articles</h2>
<ul>
<li><a href="2017-07-26-Quantum-Computing-in-Haskell.html">Quantum Computing in Haskell - I part</a></li>
<li><a href="2017-07-28-Quantum-Computing-in-Haskell-second-part.html">Quantum Computing in Haskell - II part</a></li>
<li><a href="2017-08-01-Quantum-Computing-in-Haskell-third-part.html">Quantum Computing in Haskell - III part</a></li>
<li><a href="2017-08-18-Quantum-Computing-in-Haskell-fourth-part.html">Quantum Computing in Haskell - IV part</a></li>
<li><a href="https://github.com/ardeleanasm/qchas">Github Repository</a></li>
<li><a href="https://ardeleanasm.github.io/qchas/">Project’s Haddock Documentation</a></li>
<li><a href="https://hackage.haskell.org/package/qchas">QChas Package</a></li>
</ul>
<h2 id="introduction">Introduction</h2>
<p>In the second part of this series I talked about the Haskell implementation of Qubits. There are two more articles about the library and after that I will start posting about algorithms. In this article we will define some Quantum Gates that we will use in our algorithms, even if in the first article I wrote a little about this topic and I presented some matrices.</p>
<h2 id="background">Background</h2>
<p>As we already know computers are built using logic gates and in a similar way quantum computation also use logic gates that can be designed by considering unitary transformation of the qubits. In conclusion, we can construct infinitely many quantum logic gates with the constraint that they must be reversible.</p>
<p>In the first article from this series I already presented some gates but we didn’t see their symbol or truth table.</p>
<h3 id="qubit-gates">1 qubit gates</h3>
<h4 id="pauli-x-gate-or-not-gate">Pauli X-Gate or NOT gate</h4>
<p><em>Symbol:</em></p>
<div class="figure">
<img src="../images/xgate.png" title="Pauli XGate" alt="X-Gate Symbol" />
<p class="caption">X-Gate Symbol</p>
</div>
<p><em>Matrix:</em></p>
<p><span class="math display">\[X=\begin{pmatrix}0 &amp; 1 \\ 1 &amp; 0 \end{pmatrix}\]</span></p>
<p><em>Transformation:</em></p>
<p><span class="math inline">\(\newcommand{\ket}[1]{\left|{#1}\right\rangle}\)</span> <span class="math inline">\(\newcommand{\bra}[1]{\left\langle{#1}\right|}\)</span> <span class="math display">\[X\ket{0}=\ket{1}, X\ket{1}=\ket{0}\]</span></p>
<h4 id="pauli-y-gate">Pauli Y-Gate</h4>
<p><em>Symbol:</em></p>
<div class="figure">
<img src="../images/ygate.png" title="Pauli YGate" alt="Y-Gate Symbol" />
<p class="caption">Y-Gate Symbol</p>
</div>
<p><em>Matrix:</em></p>
<p><span class="math display">\[Y=\begin{pmatrix}0 &amp; -i \\ i &amp; 0 \end{pmatrix}\]</span></p>
<p><em>Transformation:</em></p>
<p><span class="math display">\[Y\ket{0}=i\ket{1}, Y\ket{1}=-i\ket{0}\]</span></p>
<h4 id="pauli-z-gate">Pauli Z-Gate</h4>
<p><em>Symbol:</em></p>
<div class="figure">
<img src="../images/zgate.png" title="Pauli ZGate" alt="Z-Gate Symbol" />
<p class="caption">Z-Gate Symbol</p>
</div>
<p><em>Matrix:</em></p>
<p><span class="math display">\[Z=\begin{pmatrix}1 &amp; 0 \\ 0 &amp; -1 \end{pmatrix}\]</span></p>
<p><em>Transformation:</em></p>
<p><span class="math display">\[Z\ket{0}=\ket{0} and Z\ket{1}=-\ket{1}\]</span></p>
<h4 id="hadamard-gate">Hadamard Gate:</h4>
<p><em>Symbol:</em></p>
<div class="figure">
<img src="../images/hgate.png" title="Hadamard Gate" alt="H-Gate Symbol" />
<p class="caption">H-Gate Symbol</p>
</div>
<p><em>Matrix:</em></p>
<p><span class="math display">\[H=\frac{1}{\sqrt{2}}\begin{pmatrix}1 &amp; 1 \\ 1 &amp; -1 \end{pmatrix}\]</span></p>
<p><em>Transformation:</em></p>
<p><span class="math display">\[H\ket{0}=\frac{1}{\sqrt{2}}(\ket{0}+\ket{1}), H\ket{1}=\frac{1}{\sqrt{2}}(\ket{0}-\ket{1})\]</span></p>
<h3 id="controlled-quantum-gates">Controlled Quantum Gates</h3>
<p>Controlled Quantum Gates are useful for implementing <strong>IF-THEN-ELSE</strong> type operations. In this article we will only present <strong>CNOT</strong>.</p>
<h4 id="controlled-not-cnot">Controlled-NOT (CNOT)</h4>
<p><em>Symbol:</em></p>
<div class="figure">
<img src="../images/cnotgate.png" title="Controlled-NOT" alt="CNOT-Gate Symbol" />
<p class="caption">CNOT-Gate Symbol</p>
</div>
<p><em>Truth Table:</em></p>
<table>
<thead>
<tr class="header">
<th align="center">x</th>
<th align="center">y</th>
<th align="center">x <span class="math inline">\((x\oplus y)\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0 0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">1</td>
<td align="center">0 1</td>
</tr>
<tr class="odd">
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1 1</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1 0</td>
</tr>
</tbody>
</table>
<h2 id="implementation">Implementation</h2>
<p>Having the background now, let’s start implementing those gates in Haskell. First, let’s define a new data named <strong>Gate</strong>.</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">Gate</span><span class="fu">=</span>
  <span class="dt">Gate</span> {
<span class="ot">          gateMatrix::</span>(<span class="dt">Matrix</span> <span class="dt">C</span>) 
        } <span class="kw">deriving</span> (<span class="dt">Eq</span>,<span class="dt">Show</span>)</code></pre></div>
<p>Our data <strong>Gate</strong> has a constructor <strong>Gate</strong> with one parameter, <strong>gateMatrix</strong>, of type ** complex matrx<strong>, <code>Matrix C</code>. Let’s see the code in </strong>GHCI**:</p>
<p><code>ghci&gt;:t Gate Gate :: Matrix C -&gt; Gate ghci&gt;let g= Gate ((2&gt;&lt;2) [1,0,0,-1]::Matrix C) ghci&gt;g Gate {gateMatrix = (2&gt;&lt;2)  [ 1.0 :+ 0.0,       0.0 :+ 0.0  , 0.0 :+ 0.0, (-1.0) :+ (-0.0) ]} ghci&gt;&gt;gateMatrix g (2&gt;&lt;2)  [ 1.0 :+ 0.0,       0.0 :+ 0.0  , 0.0 :+ 0.0, (-1.0) :+ (-0.0) ]</code></p>
<p>In the above example we created a Pauli Z-Gate. We will proceed like for Qubit and we will define some functions that will return a Gate. We will implement the Pauli X-Gate, Y-Gate, Z-Gate, Hadamard Gate, CNOT-Gate, and Controlled Phase Shift Gate ( we will need in Grover’s Algorithm).</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">xGate::</span><span class="dt">Gate</span>
xGate<span class="fu">=</span><span class="dt">Gate</span> ((<span class="dv">2</span><span class="fu">&gt;&lt;</span><span class="dv">2</span>)[<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>]<span class="ot">::</span><span class="dt">Matrix</span> <span class="dt">C</span>)

<span class="ot">yGate::</span><span class="dt">Gate</span>
yGate<span class="fu">=</span><span class="dt">Gate</span> ((<span class="dv">2</span><span class="fu">&gt;&lt;</span><span class="dv">2</span>) [<span class="fl">0.0</span>,<span class="fl">0.0</span><span class="fu">:+</span>(<span class="fu">-</span><span class="fl">1.0</span>),<span class="fl">0.0</span><span class="fu">:+</span><span class="fl">1.0</span>,<span class="fl">0.0</span>]<span class="ot">::</span><span class="dt">Matrix</span> <span class="dt">C</span>)

<span class="ot">zGate::</span><span class="dt">Gate</span>
zGate<span class="fu">=</span><span class="dt">Gate</span> ((<span class="dv">2</span><span class="fu">&gt;&lt;</span><span class="dv">2</span>) [<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="fu">-</span><span class="dv">1</span>]<span class="ot">::</span><span class="dt">Matrix</span> <span class="dt">C</span>)

<span class="ot">hGate::</span><span class="dt">Gate</span>
hGate<span class="fu">=</span><span class="dt">Gate</span> ((<span class="dv">2</span><span class="fu">&gt;&lt;</span><span class="dv">2</span>) [<span class="dv">1</span><span class="fu">/</span>sqrt <span class="dv">2</span>,<span class="dv">1</span><span class="fu">/</span>sqrt <span class="dv">2</span>,<span class="dv">1</span><span class="fu">/</span>sqrt <span class="dv">2</span>,(<span class="fu">-</span><span class="dv">1</span>)<span class="fu">/</span>sqrt <span class="dv">2</span>]<span class="ot">::</span><span class="dt">Matrix</span> <span class="dt">C</span>)

<span class="ot">cNotGate::</span><span class="dt">Gate</span>
cNotGate<span class="fu">=</span><span class="dt">Gate</span> ((<span class="dv">4</span><span class="fu">&gt;&lt;</span><span class="dv">4</span>)[<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>]<span class="ot">::</span><span class="dt">Matrix</span> <span class="dt">C</span>)

<span class="ot">cPhaseShifGate::</span><span class="dt">Gate</span>
cPhaseShifGate<span class="fu">=</span><span class="dt">Gate</span> ((<span class="dv">4</span><span class="fu">&gt;&lt;</span><span class="dv">4</span>)[<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="fu">-</span><span class="dv">1</span>]<span class="ot">::</span><span class="dt">Matrix</span> <span class="dt">C</span>)</code></pre></div>
<p>Now, in GHCI, if we call, for example <code>zGate</code> we will see that the output is the same with the one from the previous example:</p>
<pre><code>ghci&gt;zGate
Gate {gateMatrix = (2&gt;&lt;2)
 [ 1.0 :+ 0.0,       0.0 :+ 0.0
 , 0.0 :+ 0.0, (-1.0) :+ (-0.0) ]}
ghci&gt;:t zGate
zGate :: Gate</code></pre>
<h2 id="conclusions">Conclusions</h2>
<p>In this article we implemented some 1-qubit Gates and some Controlled-Gate. In next articles we will define some functions to apply those gate on qubits and also to create gates, starting from 1-qubit ones, that apply on multiple qubits. New ideas, features, issues are welcomed and I encourage every reader to submit them on Github or ask questions using Disquss.</p>
        <div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = '23ars';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

    </section>
</article>

        </div>
        </div>
        <div id="footer">
          <div class="inside">
            Site proudly generated by
	     <link rel="stylesheet" href="../css/core.css" />





<a href="https://github.com/ardeleanasm"><i class="svg-icon github"></i></a>
<a href="https://www.linkedin.com/in/ardelean-sebastian-mihai"><i class="svg-icon linkedin"></i></a>
<a href="https://ardeleanasm.github.io/atom.xml"><i class="svg-icon rss"></i></a>
<a href="https://www.twitter.com/mihaiseba"><i class="svg-icon twitter"></i></a>
<a href="http://stackoverflow.com/users/1462225/23ars"><i class="svg-icon stackoverflow"></i></a>
<a href="https://www.haskellers.com/user/4914"><img src="https://www.haskellers.com/static/badge.png" alt="I'm a Haskeller">
</a>
</br>
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>.

          </div>
        </div>
    </body>
</html>

            
        </li>
    
        <li>
            <a href="./posts/2017-07-28-Quantum-Computing-in-Haskell-second-part.html">Quantum Computing in Haskell - II part</a> - July 28, 2017
            
                <!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="../assets/favicon.png">
        <link rel="apple-touch-icon" href="../assets/touch-icon.png">
        <title>Laziness leads to progress - Quantum Computing in Haskell - II part</title>
        <link rel="stylesheet" href="../css/default.css" />
        <link rel="stylesheet" href="../css/syntax.css" />
        <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
      <div class="highbar">&nbsp;</div>
        <div id="header">
          <div class="box">
            <div id="logo" class="name">
              <h2><a href="../">Laziness leads to progress!</a></h2>
            </div>
            <div id="navigation" class="pageslinks">
              <nav class="menuNav">
                <div class="menuItems">
                <a href="../" class="posts/2017-07-28-Quantum-Computing-in-Haskell-second-part.md">Home</a>
                <a href="../about.html" class="posts/2017-07-28-Quantum-Computing-in-Haskell-second-part.md">About</a>
                <a href="../archive.html" class="posts/2017-07-28-Quantum-Computing-in-Haskell-second-part.md">Archive</a>
                </div>
              </nav>
            </div>
        </div>
        </div>
        <div class="container-gallery">
        <div id="content" class="inside">
            <article>
    <section class="header">
        Posted on July 28, 2017
        
    </section>
    <div class="info">
        
        Tags: <a href="../tags/haskell.html">haskell</a>
        
    </div>
    <section>
        <h2 id="articles">Articles</h2>
<ul>
<li><a href="2017-07-26-Quantum-Computing-in-Haskell.html">Quantum Computing in Haskell - I part</a></li>
<li><a href="2017-07-28-Quantum-Computing-in-Haskell-second-part.html">Quantum Computing in Haskell - II part</a></li>
<li><a href="2017-08-01-Quantum-Computing-in-Haskell-third-part.html">Quantum Computing in Haskell - III part</a></li>
<li><a href="2017-08-18-Quantum-Computing-in-Haskell-fourth-part.html">Quantum Computing in Haskell - IV part</a></li>
<li><a href="https://github.com/ardeleanasm/qchas">Github Repository</a></li>
<li><a href="https://ardeleanasm.github.io/qchas/">Project’s Haddock Documentation</a></li>
<li><a href="https://hackage.haskell.org/package/qchas">QChas Package</a></li>
</ul>
<h2 id="introduction">Introduction</h2>
<p>In the first article from this series I presented some basic math and I suggest reading that article first if someone is not familiar with the topic of Quantum Computing. In this article, the second from the series I will present the implementation in Haskell. The plan is that after a few articles in which I will present the data types, modules, functions, we will implement some Quantum algorithms like Deutsch’s Algorithm, Grover’s Algorithm, Deutsch-Josza’s Algorithm and maybe Shor’s algorithm.</p>
<h2 id="background">Background</h2>
<p>We saw in the previous article that the state of a qubit can be described by</p>
<p><span class="math inline">\(\newcommand{\ket}[1]{\left|{#1}\right\rangle}\)</span> <span class="math inline">\(\newcommand{\bra}[1]{\left\langle{#1}\right|}\)</span> <span class="math display">\[\ket{v}=\alpha\ket{0}+\beta\ket{1}\]</span></p>
<p>where</p>
<p><span class="math display">\[{|\alpha|}^2+{|\beta|}^2=1\]</span></p>
<p>and</p>
<p><span class="math display">\[\ket{0}=\begin{bmatrix} 1 \\ 0\end{bmatrix}\]</span> <span class="math display">\[\ket{1}=\begin{bmatrix} 0 \\ 1\end{bmatrix}\]</span></p>
<p>It’s clearly, from the above equations, that we have to implement a Qubit type and the qubits <span class="math inline">\(\ket{0}\)</span> and <span class="math inline">\(\ket{1}\)</span>.</p>
<h2 id="implementation">Implementation</h2>
<p>For the implementation in Haskell I chose to use <a href="https://hackage.haskell.org/package/hmatrix">hmatrix</a> library because we will have to work with matrices and vectors and by using this library we won’t have to implement new types and functions that performs the needed operations.</p>
<p>Anyway, a simple solution that don’t use hmatrix is to define our own <strong>matrix</strong> and <strong>vector</strong> types like</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">type</span> <span class="dt">Vector</span> a<span class="fu">=</span>[a]
<span class="kw">type</span> <span class="dt">Matrix</span> a<span class="fu">=</span>[<span class="dt">Vector</span> a]</code></pre></div>
<p>and also some functions that will create our complex vectors and matrices</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">complexVector::</span><span class="dt">Real</span> a<span class="ot">=&gt;</span><span class="dt">Vector</span> a<span class="ot">-&gt;</span><span class="dt">Vector</span>(<span class="dt">Complex</span> <span class="dt">Double</span>)
complexVector<span class="fu">=</span>map(\i<span class="ot">-&gt;</span>realToFrac i<span class="fu">:+</span><span class="fl">0.0</span>)

<span class="ot">complexMatrix::</span><span class="dt">Real</span> a<span class="ot">=&gt;</span><span class="dt">Matrix</span> a<span class="ot">-&gt;</span><span class="dt">Matrix</span>(<span class="dt">Complex</span> <span class="dt">Double</span>)
complexMatrix<span class="fu">=</span>map complexVector</code></pre></div>
<p>Since I don’t think that is a feasible approach I won’t discuss the above code. Is nice to know that we can implement it without using hmatrix, is another approach, even the first version of code from repository was implemented this way but it’s a lot of work. I won’t reinvent the wheel, at least for now! :)</p>
<p>Ok, first of all let’s define a new data named <strong>Qubit</strong>.</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">Qubit</span><span class="fu">=</span>
    <span class="dt">Qubit</span> {
<span class="ot">            qubitState::</span>(<span class="dt">Matrix</span> <span class="dt">C</span>) 
          } <span class="kw">deriving</span> (<span class="dt">Eq</span>,<span class="dt">Show</span>)</code></pre></div>
<p>Our data type has a constructor <strong>Qubit</strong> with one parameter, <strong>qubitState</strong>, of type <strong>complex matrix</strong>, <code>Matrix C</code>. If we load the above code in <strong>GHCI</strong> we can check the new type that we defined:</p>
<pre><code>ghci&gt; :t Qubit
Qubit :: Matrix C -&gt; Qubit
</code></pre>
<p>We can see that Qubit is the data type and the constructors accepts an argument of type <em>Matrix C</em> and returns a <em>Qubit</em>. Ok, now let’s try to create a Qubit.</p>
<pre><code>ghci&gt;let q=Qubit ((2&gt;&lt;1)[1,0]::Matrix C)
ghci&gt;q
Qubit {qubitState = (2&gt;&lt;1)
 [ 1.0 :+ 0.0
 , 0.0 :+ 0.0 ]}
ghci&gt;qubitState q
(2&gt;&lt;1)
 [ 1.0 :+ 0.0
 , 0.0 :+ 0.0 ]</code></pre>
<p>Basically, in the above example we created the <span class="math inline">\(\ket{0}\)</span>. Since in our future examples we will use it a lot alongside <span class="math inline">\(\ket{1}\)</span> we should define some functions that will return them.</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">qZero::</span><span class="dt">Qubit</span>
qZero<span class="fu">=</span><span class="dt">Qubit</span> ((<span class="dv">2</span><span class="fu">&gt;&lt;</span><span class="dv">1</span>)[<span class="dv">1</span>,<span class="dv">0</span>]<span class="ot">::</span><span class="dt">Matrix</span> <span class="dt">C</span>)

<span class="ot">qOne::</span><span class="dt">Qubit</span>
qOne<span class="fu">=</span><span class="dt">Qubit</span> ((<span class="dv">2</span><span class="fu">&gt;&lt;</span><span class="dv">1</span>) [<span class="dv">0</span>,<span class="dv">1</span>]<span class="ot">::</span><span class="dt">Matrix</span> <span class="dt">C</span>)</code></pre></div>
<p>One question that might arise after seeing the code is “Ok, why is Matrix type used instead of Vector?” The answer is quite simple, because we will have to implement, in the next articles, some operations with qubits and gates and is more simple to have the same type for both. Now, if we fire up GHCI and type:</p>
<pre><code>ghci&gt;&gt;qZero
Qubit {qubitState = (2&gt;&lt;1)
 [ 1.0 :+ 0.0
 , 0.0 :+ 0.0 ]}
ghci&gt;&gt;qOne
Qubit {qubitState = (2&gt;&lt;1)
 [ 0.0 :+ 0.0
 , 1.0 :+ 0.0 ]}</code></pre>
<p>we see that we have two functions that returns our needed qubits.</p>
<p>After the experience that I have with <a href="https://github.com/ardeleanasm/quantum_computing">Java Library for Quantum Computing</a> I think that is useful to also define two more qubits, <span class="math inline">\(\ket{+}\)</span> and <span class="math inline">\(\ket{-}\)</span>. Those qubits can be simply obtained by simply applying the Hadamard Gate on <span class="math inline">\(\ket{0}\)</span> and on <span class="math inline">\(\ket{1}\)</span> respectively.</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">qPlus::</span><span class="dt">Qubit</span>
qPlus<span class="fu">=</span><span class="dt">Qubit</span> ((<span class="dv">2</span><span class="fu">&gt;&lt;</span><span class="dv">1</span>) [<span class="dv">1</span><span class="fu">/</span>sqrt <span class="dv">2</span>, <span class="dv">1</span><span class="fu">/</span>sqrt <span class="dv">2</span>]<span class="ot">::</span><span class="dt">Matrix</span> <span class="dt">C</span>)

<span class="ot">qMinus::</span><span class="dt">Qubit</span> 
qMinus<span class="fu">=</span><span class="dt">Qubit</span> ((<span class="dv">2</span><span class="fu">&gt;&lt;</span><span class="dv">1</span>) [<span class="dv">1</span><span class="fu">/</span>sqrt <span class="dv">2</span>, <span class="fu">-</span><span class="dv">1</span><span class="fu">/</span>sqrt <span class="dv">2</span>]<span class="ot">::</span><span class="dt">Matrix</span> <span class="dt">C</span>)</code></pre></div>
<h2 id="conclusions">Conclusions</h2>
<p>For now, we have defined a Qubit type and we can create any qubit. We also define some functions that will create the most used qubits. In future articles we will define a Gate type and we will also implement some operations.</p>
<p>Based on my experience that I have on this topic after doing some research and implementing from scratch a library in Java I was surprised when I saw how fast I can implement this code in Haskell. It was quite simple and it took less time.</p>
        <div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = '23ars';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

    </section>
</article>

        </div>
        </div>
        <div id="footer">
          <div class="inside">
            Site proudly generated by
	     <link rel="stylesheet" href="../css/core.css" />





<a href="https://github.com/ardeleanasm"><i class="svg-icon github"></i></a>
<a href="https://www.linkedin.com/in/ardelean-sebastian-mihai"><i class="svg-icon linkedin"></i></a>
<a href="https://ardeleanasm.github.io/atom.xml"><i class="svg-icon rss"></i></a>
<a href="https://www.twitter.com/mihaiseba"><i class="svg-icon twitter"></i></a>
<a href="http://stackoverflow.com/users/1462225/23ars"><i class="svg-icon stackoverflow"></i></a>
<a href="https://www.haskellers.com/user/4914"><img src="https://www.haskellers.com/static/badge.png" alt="I'm a Haskeller">
</a>
</br>
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>.

          </div>
        </div>
    </body>
</html>

            
        </li>
    
        <li>
            <a href="./posts/2017-07-26-Quantum-Computing-in-Haskell.html">Quantum Computing in Haskell - I part</a> - July 26, 2017
            
                <!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="../assets/favicon.png">
        <link rel="apple-touch-icon" href="../assets/touch-icon.png">
        <title>Laziness leads to progress - Quantum Computing in Haskell - I part</title>
        <link rel="stylesheet" href="../css/default.css" />
        <link rel="stylesheet" href="../css/syntax.css" />
        <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
      <div class="highbar">&nbsp;</div>
        <div id="header">
          <div class="box">
            <div id="logo" class="name">
              <h2><a href="../">Laziness leads to progress!</a></h2>
            </div>
            <div id="navigation" class="pageslinks">
              <nav class="menuNav">
                <div class="menuItems">
                <a href="../" class="posts/2017-07-26-Quantum-Computing-in-Haskell.md">Home</a>
                <a href="../about.html" class="posts/2017-07-26-Quantum-Computing-in-Haskell.md">About</a>
                <a href="../archive.html" class="posts/2017-07-26-Quantum-Computing-in-Haskell.md">Archive</a>
                </div>
              </nav>
            </div>
        </div>
        </div>
        <div class="container-gallery">
        <div id="content" class="inside">
            <article>
    <section class="header">
        Posted on July 26, 2017
        
    </section>
    <div class="info">
        
        Tags: <a href="../tags/haskell.html">haskell</a>
        
    </div>
    <section>
        <h2 id="articles">Articles</h2>
<ul>
<li><a href="2017-07-26-Quantum-Computing-in-Haskell.html">Quantum Computing in Haskell - I part</a></li>
<li><a href="2017-07-28-Quantum-Computing-in-Haskell-second-part.html">Quantum Computing in Haskell - II part</a></li>
<li><a href="2017-08-01-Quantum-Computing-in-Haskell-third-part.html">Quantum Computing in Haskell - III part</a></li>
<li><a href="2017-08-18-Quantum-Computing-in-Haskell-fourth-part.html">Quantum Computing in Haskell - IV part</a></li>
<li><a href="https://github.com/ardeleanasm/qchas">Github Repository</a></li>
<li><a href="https://ardeleanasm.github.io/qchas/">Project’s Haddock Documentation</a></li>
<li><a href="https://hackage.haskell.org/package/qchas">QChas Package</a></li>
</ul>
<h2 id="long-story-made-short">Long story made short</h2>
<p>1 year ago I started studying the topics of Quantum Computing and Quantum Algorithms and I was fascinated. Is interresting and, like Niels Bohr said, “Anyone who is not shocked by quantum theory has not understood it.”</p>
<p>As doing my research I found quite interesting to post some small articles on these topics, some articles on CodeProject (<a href="https://www.codeproject.com/Articles/1130092/Java-based-Quantum-Computing-library">Java based Quantum Computing Library</a> and <a href="https://www.codeproject.com/Articles/1131573/Grovers-Search-Algorithm-explained">Grover’s Search Algorithm Explained</a>) and one on my website about <a href="2016-08-17-deutschs-algorithm.html">Deutsch’s algorithm</a>. For those articles I used a Java library that I created myself with the help of some of my colleagues. Now, after a year and after playing a little with Haskell, I found quite interesting to review the topic and to start posting a series of small articles about Quantum Computing.</p>
<h2 id="introduction">Introduction</h2>
<p>I’ll start by talking a little about the difference between a quantum computer and a traditional one. A lot of information about how a quantum computer works can be found in online courses, research papers and books. It’s not the scope of this post to explain in details how it works, just to present some basic differences.</p>
<p>As someone can expect, a quantum computer use the quantum mechanical effects, such as superposition, to carry out computations. We already know that in a traditional computer, the <strong>bit</strong> is the basic unit and it can be 0 or 1. The value is defined by a voltage level, in TTL technology, ideally, a 1 value is represented by 5.00 volts while a 0 value is represented by 0.00 volts. For a quantum computer, there are some differences. For example, the basic unit is the <strong>qubit</strong> (quantum bit) and can, at one time, represent value 0 and 1, by exploiting superposition. A qubit is defined by the equation presented below:</p>
<p><span class="math inline">\(\newcommand{\ket}[1]{\left|{#1}\right\rangle}\)</span> <span class="math inline">\(\newcommand{\bra}[1]{\left\langle{#1}\right|}\)</span> <span class="math inline">\(\ket{v}=\alpha\ket{0}+\beta\ket{1}\)</span></p>
<p>Before diving deeper into the subject, we will firstly review some mathematical aspects of the topic.</p>
<h2 id="complex-numbers">Complex Numbers</h2>
<p>Since probability amplitudes of a qubit are complex numbers I prefer to start with a very short introduction in the mathematics of complex numbers.</p>
<p>A complex number q is defined as <span class="math inline">\(q=a+bi\)</span> where a and b <span class="math inline">\(\in \mathcal{R}\)</span> and <span class="math inline">\(i=\sqrt{-1}\)</span> is the imaginary basis unit.</p>
<p>We can see that <strong>a</strong> is the real component of a complex number and <strong>bi</strong> is the imaginary one. We can obtain the complex conjugate by simply negating the sign of the imaginary component <span class="math inline">\(\overline{q}=a-bi\)</span>.</p>
<p>Some basic formulas that we will use during this series of articles will be addition, multiplication, and modulus.</p>
<p>Let’s consider 2 complex numbers x and y defined like:</p>
<p><span class="math display">\[x=a+bi\]</span></p>
<p>and</p>
<p><span class="math display">\[y=c+di\]</span></p>
<p>The addition of these 2 complex numbers is defined by:</p>
<p><span class="math display">\[z=x+y=a+bi+c+di=a+c+i(b+d)\]</span></p>
<p>while multiplication is defined by:</p>
<p><span class="math display">\[z=x*y=(a+bi)(c+di)=ac-bd+i(ad+cb)\]</span></p>
<p>The third operation, the modulus of the complex number x is defined by:</p>
<p><span class="math display">\[|x|=\sqrt{a^2+b^2}\]</span></p>
<h2 id="vectors">Vectors</h2>
<p>While Complex Numbers are used to represent the probability amplitudes of a qubit, vectors and linear algebra helps us to represent qubits, so I decided that it’ll be usefull to present some notations and operations before starting to write code.</p>
<p>Basically, the state of a qubit is a unit vector in a 2-dimensional complex vector space <span class="math inline">\(\mathcal{C}^2\)</span>.</p>
<p>The vector <span class="math display">\[\begin{bmatrix}\alpha\\ \beta\end{bmatrix}\]</span> can be written as</p>
<p><span class="math display">\[\alpha\ket{0}+\beta\ket{1}\]</span></p>
<p>where</p>
<p><span class="math display">\[\ket{0}=\begin{bmatrix}1\\0\end{bmatrix}\]</span></p>
<p>and</p>
<p><span class="math display">\[\ket{1}=\begin{bmatrix}0\\1\end{bmatrix}\]</span></p>
<p>In the above example I used the <strong>bra-ket</strong> notation, the notation of a column vector is called <strong>ket</strong> while the notation of a row vector is called <strong>bra</strong>. Next, I will define 3 basic operations that will be used heavily in the examples from the next articles on this topic, the inner product, outer product and tensor product.</p>
<p>The inner product, <span class="math inline">\(\bra{v}\ket{v}\)</span> is the product between the bra and the ket vectors:</p>
<p><span class="math display">\[\bra{v}\ket{v}=\begin{pmatrix}{c_1}^* &amp; {c_2}^* \end{pmatrix}\begin{pmatrix}{c_1} \\ {c_2} \end{pmatrix}={c_1}^*{c_1}+{c_2}^*{c_2}={|c_1|}^2+{|c_2|}^2\]</span></p>
<p>Outer product is <strong>ket-bra</strong> and is given by:</p>
<p><span class="math display">\[\ket{v}\bra{v}=\begin{pmatrix}c_1 \\ c_2 \end{pmatrix}\begin{pmatrix}{c_1}^* &amp; {c_2}^*\end{pmatrix}=\begin{pmatrix} c_1{c_1}^* &amp; c_1{c_2}^* \\ c_2{c_1}^* &amp; c_2{c_2}^* \end{pmatrix}\]</span></p>
<p>Lastly, if we consider <span class="math display">\[\ket{v}=\begin{pmatrix}{c_1} \\ {c_2} \end{pmatrix}\]</span> and <span class="math display">\[\ket{x}=\begin{pmatrix}{c_3} \\ {c_4} \end{pmatrix}\]</span> we can define the tensor product as:</p>
<p><span class="math display">\[\ket{v}\otimes\ket{x}=\ket{vx}=\begin{pmatrix}{c_1}{c_3} \\ {c_2}{c_3} \\ {c_1}{c_4} \\ {c_2}{c_4} \end{pmatrix}\]</span></p>
<h2 id="qubits-and-gates">Qubits and Gates</h2>
<p>Quantum mechanics tells that any such system can exist in a superposition of states and as we saw in the second chapter, the state of a qubit is described by</p>
<p><span class="math display">\[\ket{v}=\alpha\ket{0}+\beta\ket{1}\]</span></p>
<p>where <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\beta\)</span> are complex number that satisfy the relation</p>
<p><span class="math display">\[{|\alpha|}^2+{|\beta|}^2=1\]</span></p>
<p>We know that on a classic computer gate operations such as <strong>AND</strong>, <strong>OR</strong>,<strong>XOR</strong> constitute the core of data manipulation. On a quantum computer similar operations are possible on qubits by using quantum gates. The gate operations are exactly all unitary linear operations.</p>
<p>For example, the Hadamard transformation is defined as:</p>
<p><span class="math display">\[\alpha\ket{0}+\beta\ket{1}\rightarrow\frac{\alpha+\beta}{\sqrt{2}}\ket{0}+\frac{\alpha-\beta}{\sqrt{2}}\ket{1}\]</span></p>
<p>Knowing that <span class="math display">\[\ket{0}=\begin{bmatrix}{1} \\ {0} \end{bmatrix}\]</span> and <span class="math display">\[\ket{1}=\begin{bmatrix}{0} \\ {1} \end{bmatrix}\]</span> then we can represent the transformation as the matrix:</p>
<p><span class="math display">\[\frac{1}{\sqrt{2}}\begin{pmatrix}1 &amp; 1 \\ 1 &amp; -1 \end{pmatrix}\]</span></p>
<p>A Hadamard gate creates a superposition state, often beginning and ending a quantum computation to initiate data processing and to collect data, respectively.</p>
<p>A set of useful 1-qubit gates are the Pauli Gates, the X gate, Y gate and Z gate.</p>
<p><span class="math display">\[X\ket{0}=\ket{1} and X\ket{1}=\ket{1}; X=\begin{pmatrix}0 &amp; 1 \\ 1 &amp; 0 \end{pmatrix}\]</span></p>
<p><span class="math display">\[Y\ket{0}=i\ket{1} and Y\ket{1}=-i\ket{0}; Y=\begin{pmatrix}0 &amp; -i \\ i &amp; 0 \end{pmatrix}\]</span></p>
<p><span class="math display">\[Z\ket{0}=\ket{0} and Z\ket{1}=-\ket{1}; Z=\begin{pmatrix}1 &amp; 0 \\ 0 &amp; -1 \end{pmatrix}\]</span></p>
<p>Two more gates that we will use in our examples are the Controlled-Not and Controlled Phase Shift and they are defined by the following matrices:</p>
<p><span class="math display">\[Controlled Phase Shift=\begin{pmatrix} 1 &amp; 0 &amp; 0 &amp; 0 \\ 0 &amp; 1 &amp; 0 &amp; 0 \\ 0 &amp; 0 &amp; 1 &amp; 0 \\ 0 &amp; 0 &amp; 0 &amp; -1\end{pmatrix}\]</span></p>
<p><span class="math display">\[Controlled Not=\begin{pmatrix} 1 &amp; 0 &amp; 0 &amp; 0 \\ 0 &amp; 1 &amp; 0 &amp; 0 \\ 0 &amp; 0 &amp; 0 &amp; 1 \\ 0 &amp; 0 &amp; 1 &amp; 0 \end{pmatrix}\]</span></p>
<p>In the next article we will write some code that implements some basic operations.</p>
        <div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = '23ars';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

    </section>
</article>

        </div>
        </div>
        <div id="footer">
          <div class="inside">
            Site proudly generated by
	     <link rel="stylesheet" href="../css/core.css" />





<a href="https://github.com/ardeleanasm"><i class="svg-icon github"></i></a>
<a href="https://www.linkedin.com/in/ardelean-sebastian-mihai"><i class="svg-icon linkedin"></i></a>
<a href="https://ardeleanasm.github.io/atom.xml"><i class="svg-icon rss"></i></a>
<a href="https://www.twitter.com/mihaiseba"><i class="svg-icon twitter"></i></a>
<a href="http://stackoverflow.com/users/1462225/23ars"><i class="svg-icon stackoverflow"></i></a>
<a href="https://www.haskellers.com/user/4914"><img src="https://www.haskellers.com/static/badge.png" alt="I'm a Haskeller">
</a>
</br>
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>.

          </div>
        </div>
    </body>
</html>

            
        </li>
    
        <li>
            <a href="./posts/2016-08-17-deutschs-algorithm.html">Deutsch's Algorithm</a> - August 17, 2016
            
                <!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="../assets/favicon.png">
        <link rel="apple-touch-icon" href="../assets/touch-icon.png">
        <title>Laziness leads to progress - Deutsch's Algorithm</title>
        <link rel="stylesheet" href="../css/default.css" />
        <link rel="stylesheet" href="../css/syntax.css" />
        <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
      <div class="highbar">&nbsp;</div>
        <div id="header">
          <div class="box">
            <div id="logo" class="name">
              <h2><a href="../">Laziness leads to progress!</a></h2>
            </div>
            <div id="navigation" class="pageslinks">
              <nav class="menuNav">
                <div class="menuItems">
                <a href="../" class="posts/2016-08-17-deutschs-algorithm.md">Home</a>
                <a href="../about.html" class="posts/2016-08-17-deutschs-algorithm.md">About</a>
                <a href="../archive.html" class="posts/2016-08-17-deutschs-algorithm.md">Archive</a>
                </div>
              </nav>
            </div>
        </div>
        </div>
        <div class="container-gallery">
        <div id="content" class="inside">
            <article>
    <section class="header">
        Posted on August 17, 2016
        
    </section>
    <div class="info">
        
        Tags: <a href="../tags/java.html">java</a>
        
    </div>
    <section>
        <p>In this post I’ll present a quantum implementation of the Deutsch’s algorithm using a library <strong>QuantumComputingLib</strong> that I wrote this week.</p>
<p>First, I should write a little about the library. It’s version <em>1.0-SNAPSHOT</em> only and it doesn’t have an official release version. For now, it only has a basic Javadoc and only provides methods for well-known operations on qubits and matrices. I hope that I will able to offer support for it and that this project will be active for a long time, I hope that at least 2 years. If someone want to use and test the library, it can be found at the next <a href="https://github.com/ardeleanasm/quantum_computing/tree/master/quantum">link</a>. Also, for using this algorithm, you’ll need the <strong>ComplexNumber</strong> library. This library can be found at the next <a href="https://github.com/ardeleanasm/projects/tree/master/complexnumbers">link</a>.</p>
<h3 id="deutschs-algorithm">Deutsch’s algorithm</h3>
<p>The problem that Deutsch’s algorithm solves is not an important problem in Computer Science but it’s a good problem to see how quantum computers can be used. This problem can be solved by a quantum computer faster that a traditional one, althoug not exponentially faster.</p>
<p>Suppose there is a function f, which has 1-bit inputs/outputs. The maximum number of such function is four:</p>
<table>
<thead>
<tr class="header">
<th align="left">Function</th>
<th align="center">Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">\[f_{1}(0)=0, f_{1}(1)=0\]</td>
<td align="center">constant</td>
</tr>
<tr class="even">
<td align="left">\[f_{2}(0)=1, f_{2}(1)=1\]</td>
<td align="center">constant</td>
</tr>
<tr class="odd">
<td align="left">\[f_{3}(0)=0, f_{3}(1)=1\]</td>
<td align="center">balanced</td>
</tr>
<tr class="even">
<td align="left">\[f_{4}(0)=1, f_{4}(1)=0\]</td>
<td align="center">balanced</td>
</tr>
</tbody>
</table>
<p>The goal was to determine whether the function passed to an algorithm’s input is constant or not. Using a traditional computing this problem can be solved only by evaluating the function twice but using a quantum one, the type of the function can be determined by evaluating it once.</p>
<h3 id="implementation">Implementation</h3>
<div class="figure">
<img src="../images/deutsch_quantum_circuits.png" alt="The quantum circuit of Deutsch’s algorithm[1]" />
<p class="caption">The quantum circuit of Deutsch’s algorithm[1]</p>
</div>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java">gateH = gateFactory.<span class="fu">getGate</span>(EGateTypes.<span class="fu">E_HadamardGate</span>);
gateX = gateFactory.<span class="fu">getGate</span>(EGateTypes.<span class="fu">E_XGate</span>);
gateHH = MatrixOperations.<span class="fu">tensorProduct</span>(gateH.<span class="fu">getUnitaryMatrix</span>(), gateH.<span class="fu">getUnitaryMatrix</span>());</code></pre></div>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java">resultQubit = QuantumOperations.<span class="fu">applyGate</span>(QuantumOperations.<span class="fu">applyGate</span>(
			    QuantumOperations.<span class="fu">applyGate</span>(
				    QuantumOperations.<span class="fu">entangle</span>(QUBIT_<span class="dv">0</span>, QuantumOperations.<span class="fu">applyGate</span>(QUBIT_<span class="dv">0</span>, gateX)), gateHH),
			    functionOperator), gateHH);</code></pre></div>
<ul>
<li>Apply the X-Gate on the second qubit.</li>
<li>Determine the tensor product between the 2 qubits.</li>
<li>Calculate the tensor product between the two Hadamard gates and apply the resulting gate.</li>
<li>Apply U<sub>f</sub> operator.</li>
<li>Apply again the Hadamard gate.</li>
</ul>
<hr />
<p>References:</p>
<p>[1] [http://kukuruku.co/hub/haskell/how-to-implement-deutschs-algorithm-in-haskell](http://kukuruku.co/hub/haskell/how-to-implement-deutschs-algorithm-in-haskell)</p>
<p>[2] [http://www.cs.xu.edu/~kinne/quantum/deutche.html](http://www.cs.xu.edu/~kinne/quantum/deutche.html)</p>
        <div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = '23ars';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

    </section>
</article>

        </div>
        </div>
        <div id="footer">
          <div class="inside">
            Site proudly generated by
	     <link rel="stylesheet" href="../css/core.css" />





<a href="https://github.com/ardeleanasm"><i class="svg-icon github"></i></a>
<a href="https://www.linkedin.com/in/ardelean-sebastian-mihai"><i class="svg-icon linkedin"></i></a>
<a href="https://ardeleanasm.github.io/atom.xml"><i class="svg-icon rss"></i></a>
<a href="https://www.twitter.com/mihaiseba"><i class="svg-icon twitter"></i></a>
<a href="http://stackoverflow.com/users/1462225/23ars"><i class="svg-icon stackoverflow"></i></a>
<a href="https://www.haskellers.com/user/4914"><img src="https://www.haskellers.com/static/badge.png" alt="I'm a Haskeller">
</a>
</br>
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>.

          </div>
        </div>
    </body>
</html>

            
        </li>
    
        <li>
            <a href="./posts/2016-04-24-first-experience-winapi.html">First experience with WinApi</a> - April 24, 2016
            
                <!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="../assets/favicon.png">
        <link rel="apple-touch-icon" href="../assets/touch-icon.png">
        <title>Laziness leads to progress - First experience with WinApi</title>
        <link rel="stylesheet" href="../css/default.css" />
        <link rel="stylesheet" href="../css/syntax.css" />
        <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
      <div class="highbar">&nbsp;</div>
        <div id="header">
          <div class="box">
            <div id="logo" class="name">
              <h2><a href="../">Laziness leads to progress!</a></h2>
            </div>
            <div id="navigation" class="pageslinks">
              <nav class="menuNav">
                <div class="menuItems">
                <a href="../" class="posts/2016-04-24-first-experience-winapi.md">Home</a>
                <a href="../about.html" class="posts/2016-04-24-first-experience-winapi.md">About</a>
                <a href="../archive.html" class="posts/2016-04-24-first-experience-winapi.md">Archive</a>
                </div>
              </nav>
            </div>
        </div>
        </div>
        <div class="container-gallery">
        <div id="content" class="inside">
            <article>
    <section class="header">
        Posted on April 24, 2016
        
    </section>
    <div class="info">
        
        Tags: <a href="../tags/programming.html">programming</a>, <a href="../tags/c%2B%2B.html">c++</a>
        
    </div>
    <section>
        <p>I discovered Linux Api, Linux System Programming some time ago and I found it amazing but I always thought “that’s not enough!”.</p>
<!--more-->
<p>I discovered Linux Api, Linux System Programming some time ago and I found it amazing but I always thought “that’s not enough!”. And it’s not! I have a lot of experience on Linux, I wrote device drivers, userspace applications using C and Linux API but I never tried to wrote some applications that use Windows API.</p>
<p>This post will be the first about my experience with WinApi, system calls etc. I’m getting really tired to write apps on Windows in C++ CLR or C# and I want to try something more “low level”. Note, all my small projects using WinApi will be integrated in Git under <a href="https://github.com/ardeleanasm/projects/tree/master/winapi/RegistryList">projects/winapi</a>.</p>
<p>Now, I should talk about the first small project, not done yet. RegistryList will be an application that will dump all Registry Entries<Key,Value> and will allow user to set some filters, also maybe to clean/fix Registry Entries and extract and save data from entries. Maybe, in the last iteration, I’ll add some UI to application and maybe I’ll maintain it. But now, the application is just a bunch of C++ classes and can only dump Registry Entries<Key, Value> and print them. It’s not so nice…</p>
<p>Code…. hmmm, code can be found <a href="https://github.com/ardeleanasm/projects/tree/master/winapi/RegistryList">HERE</a> but, let’s talk a little.</p>
<p>I wrote a lot of C code and I don’t really like return codes, if I can throw an exception. OK, on Linux, where I try to wrote all the applications in C code, I need to use return codes, but if I use WinApi and C++… Why not use exceptions?</p>
<p>So, in <strong>KeyQueryExceptions.h</strong> I defined some custom exceptions for the case where some parameters are not set or the some call to WinApi function return an error that is not <em>ERROR_SUCCESS</em> ( I really found this name funny, ERROR_SUCCESS… It’s a success or failure? :) ).</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="kw">class</span> CRegOpenKeyExException :<span class="kw">public</span> <span class="bu">std::</span>exception
{
<span class="kw">private</span>:
	<span class="bu">std::</span>string <span class="va">g_msg</span>;
<span class="kw">public</span>:
	CRegOpenKeyExException(<span class="at">const</span> <span class="bu">std::</span>string&amp; msg) :<span class="va">g_msg</span>(msg)
	{}

	CRegOpenKeyExException() :<span class="va">g_msg</span>(<span class="st">&quot;RegOpenKeyEx call failed!&quot;</span>){}
	<span class="at">const</span> <span class="dt">char</span> *ShowReason() <span class="at">const</span>
	{
		<span class="cf">return</span> <span class="va">g_msg</span>.c_str();
	}


};</code></pre></div>
<p>In the code snippet is defined an exception that is thrown when RegOpenKeyExt function call return a value different from ERROR_SUCCESS.</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="pp">#pragma once</span>


<span class="kw">class</span> CKeyQuery
{
	CKeyQuery(CKeyQuery <span class="at">const</span> &amp;) = <span class="kw">delete</span>;
	CKeyQuery(CKeyQuery &amp;&amp;) = <span class="kw">delete</span>;
	CKeyQuery &amp;<span class="kw">operator</span>=(CKeyQuery <span class="at">const</span> &amp;) = <span class="kw">delete</span>;
	CKeyQuery &amp;<span class="kw">operator</span>=(CKeyQuery &amp;&amp;) = <span class="kw">delete</span>;
<span class="kw">public</span>:
	CKeyQuery();
	~CKeyQuery();
	<span class="dt">void</span> QueryKey(HKEY hKey, UINT32 * subKeys);
	<span class="dt">void</span> RegistryOpenKey(_Out_ PHKEY phkResult) <span class="cf">throw</span> (<span class="bu">std::</span>exception);
	<span class="dt">void</span> SethKey(HKEY hkey);
	<span class="dt">void</span>  SetSubKey(LPCTSTR lpSubKey);
	<span class="dt">void</span>  SetulOptions(DWORD ulOptions);
	<span class="dt">void</span>  SetSamdesired(REGSAM samDesired);
	<span class="dt">void</span> RegistryClose(_In_ HKEY hKey);
<span class="kw">private</span>:
	HKEY key;
	HKEY <span class="va">g_hkey</span>;
	LPCTSTR <span class="va">g_lpSubKey</span>;
	DWORD <span class="va">g_ulOptions</span>;
	REGSAM <span class="va">g_samDesired</span>;
	

};</code></pre></div>
<p>The above code define a class CKeyQuery. The set methods are used to set the values that will be used as parameters to RegOpenKeyEx function. The constructor and destructor of this class are used only for setting some default values, for now.</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp">CKeyQuery::CKeyQuery()
{
	<span class="va">g_hkey</span> = <span class="kw">nullptr</span>;
	<span class="va">g_lpSubKey</span> = <span class="kw">nullptr</span>;
	<span class="va">g_ulOptions</span> = <span class="dv">0</span>;
	<span class="va">g_samDesired</span> = <span class="dv">0</span>;
}
CKeyQuery::~CKeyQuery()
{
	<span class="va">g_hkey</span> = <span class="kw">nullptr</span>;
	<span class="va">g_lpSubKey</span> = <span class="kw">nullptr</span>;
	<span class="va">g_ulOptions</span> = <span class="dv">0</span>;
	<span class="va">g_samDesired</span> = <span class="dv">0</span>;
}</code></pre></div>
<p>The methods SethKey, SetSubKey,SetulOptions and SetSamdesired are simple one-line methods that will only set the values.</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="dt">void</span> CKeyQuery::RegistryOpenKey(_Out_ PHKEY phkResult) <span class="cf">throw</span> (<span class="bu">std::</span>exception)
{
	<span class="cf">if</span> (<span class="va">g_hkey</span> == <span class="kw">nullptr</span>)
	{
		<span class="cf">throw</span> <span class="kw">new</span> CParametersNotSetException(<span class="st">&quot;hkey parameter was not set&quot;</span>);
	}
	<span class="cf">if</span> (<span class="va">g_lpSubKey</span> == <span class="kw">nullptr</span>){
		<span class="cf">throw</span> <span class="kw">new</span> CParametersNotSetException(<span class="st">&quot;lpSubKey was not set!&quot;</span>);
	}
	<span class="cf">if</span> (RegOpenKeyEx(<span class="va">g_hkey</span>, <span class="va">g_lpSubKey</span>, <span class="va">g_ulOptions</span>, <span class="va">g_samDesired</span>, phkResult) != ERROR_SUCCESS)
	{
		<span class="cf">throw</span> <span class="kw">new</span> CRegOpenKeyExException();
	}
}</code></pre></div>
<p>RegistryOpenKey is a wrapper on RegOpenKeyEx system call. Here, I only test if hkey and lpSubKey are not nullptr( are not default values) and call RegOpenKeyEx. Here is where I used the exceptions, cause I don’t like returning error codes. :)</p>
<p>And now, surprise, I won’t describe the most important method, <code>void CKeyQuery::QueryKey(HKEY hKey, UINT32 *subKeys)</code>. Why? Because the most part of it was took from <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms724256(v=vs.85).aspx">Microsoft</a>. When the application will be more complex and this function will not be “copy-paste” entirely I’ll come with another article describing the modifications that I done.</p>
<p>Conclusions? Hmmm, I’m really impressed until now. I searched and found a book about <a href="http://www.amazon.com/Windows-Programming-Addison-Wesley-Microsoft-Technology/dp/0321657748">Windows System Programming</a> and I start to read it. I really like, even if the Hungarian notation conventions adopded by Microsoft maybe seems strange ( trust me, I saw notations even stranger). I’m really curious what I’ll can do, maybe I’ll start also to read more about drivers ( even if I participated at a course about Windows Device Drivers, I never wrote one by myself, I just copy-pasted some code).</p>
        <div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = '23ars';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

    </section>
</article>

        </div>
        </div>
        <div id="footer">
          <div class="inside">
            Site proudly generated by
	     <link rel="stylesheet" href="../css/core.css" />





<a href="https://github.com/ardeleanasm"><i class="svg-icon github"></i></a>
<a href="https://www.linkedin.com/in/ardelean-sebastian-mihai"><i class="svg-icon linkedin"></i></a>
<a href="https://ardeleanasm.github.io/atom.xml"><i class="svg-icon rss"></i></a>
<a href="https://www.twitter.com/mihaiseba"><i class="svg-icon twitter"></i></a>
<a href="http://stackoverflow.com/users/1462225/23ars"><i class="svg-icon stackoverflow"></i></a>
<a href="https://www.haskellers.com/user/4914"><img src="https://www.haskellers.com/static/badge.png" alt="I'm a Haskeller">
</a>
</br>
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>.

          </div>
        </div>
    </body>
</html>

            
        </li>
    
</ul>


        </div>
        </div>
        <div id="footer">
          <div class="inside">
            Site proudly generated by
	     <link rel="stylesheet" href="./css/core.css" />





<a href="https://github.com/ardeleanasm"><i class="svg-icon github"></i></a>
<a href="https://www.linkedin.com/in/ardelean-sebastian-mihai"><i class="svg-icon linkedin"></i></a>
<a href="https://ardeleanasm.github.io/atom.xml"><i class="svg-icon rss"></i></a>
<a href="https://www.twitter.com/mihaiseba"><i class="svg-icon twitter"></i></a>
<a href="http://stackoverflow.com/users/1462225/23ars"><i class="svg-icon stackoverflow"></i></a>
<a href="https://www.haskellers.com/user/4914"><img src="https://www.haskellers.com/static/badge.png" alt="I'm a Haskeller">
</a>
</br>
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>.

          </div>
        </div>
    </body>
</html>
